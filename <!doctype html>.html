<!doctype html>
<head>
    <title>Deep Space Airships</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

    <meta property="og:title" content="Deep Space Airships"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://test.drednot.io/drednot.png"/>
    <meta property="og:url" content="https://drednot.io/"/>
    <meta property="og:description" content="A free multiplayer ship construction and combat game. Build a flying battleship with your friends and conquer the skies!"/>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://test.drednot.io/drednot.png"/>

    <meta name="description" content="A free multiplayer ship construction and combat game. Build a flying battleship with your friends and conquer the skies!"/>
    <meta name="keywords" content="dredark, dreadnought, io game, space game, space ship, boat game, mmo">

    <base href="/">
    <link rel="canonical" href="https://drednot.io/"/>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
    </script>
    <style>.center-vert{vertical-align:middle}.fab{font-weight:400;vertical-align:middle}.fas{vertical-align:middle}.fa-reddit-alien{color:#ff4500}.fa-patreon{color:#ff424d}.fa-twitter{color:#1da1f2}.fa-discord{color:#7289da}.fa-poll{color:lime}.fa-bug{color:red}.big-icon{vertical-align:middle;margin:2px;font-size:1.4em}.white{color:#fff}.tooltip,.tooltip-low{display:none}*:hover>.tooltip,*:hover>.tooltip-low{display:inline-block;position:absolute;pointer-events:none;font-size:12pt;padding:4px}.tooltip{transform:translate(-50%,-100%)}.tooltip-low{transform:translate(-50%,100%)}input[type="checkbox"]{width:24px;height:24px;vertical-align:middle}.craft-queue{height:38px;overflow:hidden}.craft-queue>div{margin-right:4px;border:1px solid black;background:#222;display:inline-block;border-radius:2px;padding:0 4px;user-select:none;cursor:pointer}.craft-queue>div:hover{border:1px solid yellow}.craft-queue>div>div{width:32px;height:32px;pointer-events:none;display:inline-block}.craft-option{width:50px;height:50px;cursor:pointer;user-select:none;background-repeat:no-repeat;background-origin:border-box;border:1px solid black;display:inline-block;box-sizing:border-box;background-color:#222;background-position:center;margin:4px;position:relative}.craft-option.disable{background-color:#411}.craft-option.highlight{border:2px solid lime}.craft-option.patron-recipe{background-color:#742}.craft-option:hover{border:2px solid yellow}.craft-resource td{margin:0;padding:0}.craft-resource td *{vertical-align:middle}.craft-resource .bar{display:inline-block;border:1px solid black;background:black;text-align:center;width:100%;padding:4px;margin:1px;border-radius:2px;position:relative}.craft-resource .bar .count{color:black;background:#ddd;padding:0 2px;border-radius:4px;position:relative;z-index:30;font-size:10pt}.craft-resource .bar .bar-inner{position:absolute;top:0;left:0;bottom:0}.craft-tip{position:absolute;left:50%;padding:10px;z-index:30;transform:translate(-50%,-100%);width:600px;pointer-events:none;border:1px solid white}span.craft-big{font-size:1.5em;font-weight:bold}.log-count{display:inline-block;min-width:20px;text-align:right}.window section{border:1px solid white;margin-bottom:10px}.window section>*{margin:5px 10px}.modal-container{position:absolute;background:rgba(1,1,1,.5);width:100%;height:100%;z-index:99999;overflow-y:auto;display:flex;justify-content:center}.modal-window{width:600px;align-self:self-start;justify-self:center;margin-top:100px;margin-bottom:100px}button:disabled{filter:brightness(.5)grayscale(.5);cursor:not-allowed}.btn-google{background:url("/branding/btn_google_signin_dark_normal_web.png");border:none;width:191px;height:46px}.btn-discord{background-image:url("/branding/Discord-Logo-Color.svg");background-color:#2c2f33;background-size:36px;background-repeat:no-repeat;background-position:7px 7px;font-weight:bold;border:none;padding-left:50px;height:40px}.color-slider{border:none!important;height:20px;width:150px;box-sizing:border-box}.color-slider::-webkit-slider-runnable-track{background:none;border:none;padding:0}.color-slider::-moz-range-track{background:none;border:none;padding:0}.color-slider::-webkit-slider-thumb{-webkit-appearance:none;background:url("img/picker_arrow.png");width:5px;height:20px}.color-slider::-moz-range-thumb{border:none;background:url("img/picker_arrow.png");width:5px;height:20px}.color-picker-point{width:7px;height:7px;background:url("img/picker_point.png");position:relative;pointer-events:none}.file-pane{border:1px solid white}.file-pane>*{margin:10px}.file-pane>p{font-style:italic}.file-pane-file{border:1px solid white}.file-pane-img{width:26px;height:26px;background-size:contain;background-repeat:no-repeat;background-position:center}.file-pane-name{padding:0 5px}.center-note{margin:5px!important;text-align:center;font-style:italic}#map_button{position:absolute;right:50px;bottom:30px;transform:translateX(50%)}.h{font-size:12pt;margin-top:0}#item-ui button{pointer-events:auto}.cc-column{display:inline-block;max-width:600px;vertical-align:top;margin-right:10px}p.wip{font-style:italic;color:orange}.ui-hidden{display:none!important}.tip{position:absolute;bottom:42px;left:50%;transform:translateX(-50%);font-size:10pt;margin-bottom:4px;pointer-events:none;visibility:hidden;width:300px;z-index:2}.tip.left{transform:translateX(0%)}.tip.right{transform:translateX(-100%)}.tip.fixed{position:fixed;transform:translateY(-110%)translateX(-50%);left:unset;bottom:unset}.tip h3{margin:5px;text-align:left}.tip p{margin:0 5px 5px}*:hover>.tip{visibility:visible}#big-ui-container{position:absolute;z-index:5;top:35px;bottom:80px;left:0;right:0;pointer-events:none}#shipyard{height:100%;display:flex}#shipyard-ships{position:relative;flex:1;pointer-events:auto;overflow-y:auto;overflow-x:hidden}#shipyard-ships h3{padding:5px}.shipyard-bin{display:flex;flex-wrap:wrap;justify-content:center}.shipyard-item{display:inline-block;border:1px solid black;margin:5px;vertical-align:top;position:relative;background-size:cover;cursor:pointer}.shipyard-item>*{position:absolute;color:#fff;margin:0}.shipyard-item>.sy-title{left:0;right:0}.shipyard-item>.sy-title h3{background:rgba(1,1,1,.7);font-size:12pt;margin:0;padding:2px;overflow:hidden;white-space:nowrap}.shipyard-item>.sy-id{bottom:0;right:0}.shipyard-item>.sy-crew{bottom:0;left:0}.shipyard-item span{background:rgba(1,1,1,.7);padding:2px;font-size:10pt}.shipyard-ad{display:flex;justify-content:center;margin:10px}.shipyard-ad h4{text-align:center;margin:4px}ul.shipyard-partners{font-size:10pt;padding:0px 10px 5px 20px;margin:0}#new-ad-slot-1 p,#new-ad-slot-2 p,#new-ad-slot-3 p{margin:10px;text-align:center}#top-bar{position:absolute;top:0;left:0;right:0;z-index:100000;font-size:10pt;padding:2px 8px}#top-bar h1{font-size:10pt;display:inline}#top-bar a{text-decoration:none}#top-bar>*{margin:0 10px}html,body{height:100%;background:#111;margin:0;padding:0;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Helvetica Neue",Arial,sans-serif;user-select:none}.window,.window-dark,#bottom-bar,#scoreboard{pointer-events:auto;user-select:text}.window{position:relative;padding:10px;overflow-y:auto;box-sizing:border-box}#window-container{position:absolute;z-index:10;top:20px;bottom:100px;left:0;right:0;display:grid;grid-template-columns:1fr auto auto 1fr;grid-template-rows:100%;align-items:center;transform-origin:left;pointer-events:none}#window-container>*{box-sizing:border-box;display:inline-block;max-height:100%}#window-container>.center{justify-self:center;grid-column:2}#window-container>.left{grid-column:1;justify-self:center}#window-container>.right{grid-column:4;justify-self:center}.center-container-h{display:flex;justify-content:center}h2{text-align:center;margin:10px}h3{margin:10px 0}hr{border:none;border-top:1px solid black}div#notice button{margin:10px;font-size:1.2em}#start-menu{display:flex;flex-direction:column;margin:0}#game-container{position:absolute;top:0;bottom:0;left:0;right:0}.button-container{display:flex;margin:0 50px;z-index:20;position:relative}.button-container>*{pointer-events:auto}button,.btn{border:1px solid black;border-radius:5px;background:linear-gradient(#666,#000 200%);font-size:12pt;padding:5px;margin:5px;color:#fff;text-decoration:none;cursor:pointer;white-space:nowrap;vertical-align:middle;user-select:none}.btn{color:#fff!important}.btn-small{font-size:10pt;padding:3px;margin:3px}.btn-large{font-size:20pt;padding:10px;margin:10px}.btn-meme{font-size:30pt;background:linear-gradient(#a4a,#000 200%)!important}.btn-red{background:linear-gradient(#a44,#000 200%)!important}.btn-orange{background:linear-gradient(#b84,#000 200%)!important}.btn-yellow{background:linear-gradient(#994,#000 200%)!important}.btn-green{background:linear-gradient(#4a4,#000 200%)!important}.btn-blue{background:linear-gradient(#488,#000 200%)!important}.btn-pink{background:linear-gradient(#a4a,#000 200%)!important}.no-margin{margin:0}.button-container .last-left{margin-right:auto}.vertical-center-img{display:inline-block;height:100%;vertical-align:middle}.vertical-center-img img{vertical-align:middle}#content-bottom{pointer-events:none;position:absolute;bottom:0;width:100%}#bottom-bar{font-size:10pt;padding:8px;padding-bottom:2px;border-bottom:none;position:relative;z-index:100000}.darker{color:white!important;background:rgb(25,35,45)!important;border-radius:0!important;border:1px solid black}.dark{color:white!important;background:rgba(25,35,45,.9)!important;border-radius:0!important;border:1px solid black}.dark a,.darker a{color:yellow}.dark input,.dark textarea,.darker input,.darker textarea{background:rgba(0,0,0,.2);color:white;border:1px solid white}.dark input,.darker input{padding:4px;font-size:14pt}.dark hr,.darker hr{border-top:1px solid#ccc}#team-list>p{text-align:center}.scoreboard{color:black;border:2px solid black;overflow-y:auto;overflow-x:hidden;max-width:600px}.scoreboard>p{margin:10px;text-align:center}.scoreboard>div{padding:10px;padding-bottom:12px;border-bottom:1px solid black}.scoreboard>div:last-child{border-bottom:none}.scoreboard>div>h3{text-align:left;margin:0}.scoreboard>div>h3>span{float:right;margin-left:30px}.scoreboard>div>p{margin:0}.scoreboard span.hex{font-size:8pt;float:right}.scoreboard input{vertical-align:top}#chat{color:white;background:rgba(25,35,45,.9);width:500px;align-self:flex-end;border:1px solid black;pointer-events:auto;padding:10px;padding-bottom:0;position:absolute;bottom:0px;margin-left:50px}#chat h3{margin:0}#chat.closed{background:none;border:none;pointer-events:none}#chat.closed h3{display:none}#chat.closed input,#chat.closed button,#chat.closed label{visibility:hidden}#chat.closed #chat-content p{display:none}#chat.closed #chat-content p.recent{display:block;background:rgba(25,35,45,.9)}#chat.closed #chat-content{user-select:none;overflow:hidden}#chat-content{user-select:text;overflow-y:auto;overflow-x:hidden;word-wrap:break-word;padding:0;max-height:300px}#chat-content p{padding:2px 8px;margin:0}#chat-autocomplete-container{position:relative}#chat-autocomplete{width:250px;max-height:400px;overflow-y:auto;overflow-x:hidden;position:absolute;left:250px;bottom:0px}#chat-autocomplete>p{cursor:pointer;margin:2px}#chat-autocomplete>p.active{background:#008!important}#chat-autocomplete>p:hover{background:#222}#chat-input{width:100%;background:none;color:white;border:2px solid white;box-sizing:border-box;padding:2px;font-size:16pt}#chat-input,#chat button{margin:4px 0}.close{position:absolute;right:20px}#canvas-game,#canvas-2d{position:absolute;top:0;left:0}.browser-warning{text-align:center;position:relative;width:auto;z-index:100;font-size:20pt;padding:10px}#team_menu{z-index:100;position:absolute;top:50px;bottom:100px;left:50px;right:50px}#team_menu h3{margin:5px;text-align:center}#team_menu>div{padding:10px;overflow-x:hidden;overflow-y:auto}#team_settings{position:absolute;top:60px;bottom:40%;left:0;right:60%;border-top:1px solid black}#team_log{position:absolute;top:60px;bottom:0;left:0;right:60%}#team_log_actual{border:1px solid white;position:absolute;top:40px;bottom:10px;left:10px;right:10px;overflow-x:hidden;overflow-y:auto}#team_log_actual p{margin:6px 10px;cursor:pointer}#team_log_actual p img{vertical-align:middle}#team_log_actual p img.icon{height:20px;vertical-align:middle}#team_players{position:absolute;top:60px;bottom:0;left:40%;right:0}#team_players_inner{position:absolute;top:80px;bottom:0;left:0;right:0;overflow-x:auto!important}#team_players .highlight-row{border:2px solid red}#team_players table{width:100%;border:1px solid white;border-collapse:collapse}#team_players th{text-align:left}#team_players td{border-top:1px solid white;border-bottom:1px solid white;padding:4px}#team_players table img{margin:2px}#team_players td u,.scoreboard div u,#team_players td code,.perk-list code,code.user{background:black;border-radius:4px;font-size:10pt;padding:2px;margin:2px;line-height:150%;text-decoration:none}.break-any{line-break:anywhere}.perk-list{list-style:none}#item-ui-container{pointer-events:none;width:100%;position:absolute;z-index:1;bottom:65px;display:flex;justify-content:center}#item-ui{padding:8px;padding-top:4px;margin:auto}#item-ui-tip{position:relative;bottom:-28px;z-index:3;padding:8px;max-width:400px}#item-ui-inv{height:48px;margin-top:12px}#item-ui-equip span{display:inline-block;width:36px;font-size:8pt;text-align:center}#item-ui-equip .item-ui-item{margin-top:0}.item-ui-item{position:relative;width:32px;height:32px;border:2px inset#aaa;display:inline-block;background-size:cover;vertical-align:middle;pointer-events:auto;background-color:#aaa;transition:width.1s,height.1s,border.1s,background.1s,margin.1s;cursor:pointer;margin:6px 0}.item-ui-item.active{width:40px;height:40px;border:4px inset#8f8;background-color:#8f8;border-radius:4px;margin:0}.item-ui-item.hover{border:2px inset#ff8;background-color:#ff8}.item-ui-item.disable{border:2px inset#666;background-color:#666}.item-ui-item.special{border:2px inset#8ff;background-color:#8ff}.item-ui-item span.count{text-align:center;position:absolute;bottom:100%;font-size:10pt;width:100%;margin-bottom:4px}.tip-warning{position:absolute;z-index:5;color:yellow;font-weight:bold;padding:4px;background:rgba(0,0,0,.5);border-radius:4px;pointer-events:none}.tip-list{position:absolute;z-index:5;color:white;padding:4px;background:rgba(0,0,0,.5);border-radius:4px;pointer-events:none}.tip-list>div{cursor:pointer;pointer-events:auto}.tip-list>div:hover{background:#08c}h2.tiny{margin:0;font-size:12pt}#drednot-io_300x250,#drednot-io_300x250_2{max-width:336px;max-height:280px}#start-menu p{margin:0}.test-notify{background:#ff0;color:#000;border:5px dashed red;padding-bottom:5px}.test-notify h3{text-align:center;margin:5px}.test-notify p{text-align:center;margin:5px;font-size:10pt}.test-notify ul{margin:0;font-size:10pt}.test-notify a{color:#000}#motd{color:white;background:rgba(0,0,0,.5);min-width:220px;border-radius:0 0 0 8px;pointer-events:auto;user-select:text;padding:10px;position:absolute;top:35px;right:0;z-index:5}#motd h2{margin:0;text-align:left;font-size:13pt}#motd-text{white-space:pre;max-width:400px;max-height:300px;overflow-x:hidden;overflow-y:auto;white-space:pre-wrap;word-wrap:break-word}#motd-content,#motd-edit{margin-top:10px}#motd-edit-text{width:400px;height:300px;resize:none}#motd-edit-text,#motd-text{font-family:sans-serif;font-size:12pt}#station-ui .bar{border:1px solid white;text-align:center;padding:4px;border-radius:2px;position:relative}#station-ui .bar .count{background:#000;padding:0 2px;border-radius:4px;position:relative;z-index:30;font-size:10pt}#station-ui .bar .bar-inner{position:absolute;top:0;left:0;bottom:0}#comms-text{width:400px;height:200px;border:1px solid white;margin:10px 0;overflow-x:hidden;overflow-y:auto;word-wrap:break-word;padding:4px}#comms-text p{margin:2px}#comms-text span{border-radius:2px;font-weight:bold}#comms-text sub{font-size:8pt;vertical-align:middle}#comms-input{width:100%;box-sizing:border-box}.new-ui-container-super{position:relative;width:100%;height:100%;margin:0;min-width:380px}.new-ui-container{position:absolute;top:0;left:0;bottom:0;right:0;display:flex;justify-content:center;align-items:center}#new-ui-left{justify-content:flex-start}#new-ui-left .window{height:100%;width:500px;margin-left:50px}#new-ui-right .window{width:500px}#new-ui-left iframe{border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:white}code.copy-box{background:black;padding:3px;user-select:all;white-space:nowrap}code.copy-box.disable{color:grey;user-select:none}.warning-text{font-weight:bold;color:#f44}.warning-text-2{font-weight:bold;color:black;background:#ff0;border:5px dashed#f00;padding:5px}.new-ui-container .bar{border:1px solid white;text-align:center;padding:4px;border-radius:2px;position:relative}.new-ui-container .bar .bar-text{background:#000;padding:0 2px;border-radius:4px;position:relative;z-index:30;font-size:10pt}.new-ui-container .bar .bar-inner{position:absolute;top:0;left:0;bottom:0}.control-slider>*{vertical-align:middle}.control-slider>input{width:50%;margin-right:10px}#notify-top{position:absolute;top:0;right:0;left:0}#notify-top-content{position:relative;width:50%;margin:30px auto;padding:0 10px}#minimap-label{padding:5px}.item-picker{overflow-y:auto;display:inline-block;position:fixed;top:100px;bottom:100px;font-size:14pt}.item-picker img,.item-picker span{vertical-align:middle}.item-picker img{margin-right:5px}.item-picker>div.active{background:#008!important}.item-picker>div:hover{background:#222}.item-picker>*{padding:5px}.item-picker>div{cursor:pointer}.item-picker .fail{font-size:2em;font-weight:bold;color:#f44}#cheat-menu{align-self:flex-end}.color-palette{border-collapse:collapse}.color-palette td{width:20px;height:20px;cursor:pointer;border:1px solid black}.fmt-txt-img{height:1em;vertical-align:middle}</style>
</head>
<body>

    <noscript>
        <div class="browser-warning dark">
            Warning: The game requires javascript to run. It appears to be unsupported or unavailable.
        </div>
    </noscript>
    <div class="browser-warning dark" id="bad-browser" style="display: none;">
        <div id="bad-browser-text" style="display: inline-block;"></div>
        <button onclick="closeBrowserWarning();">Close</button>
    </div>

    <div id="top-bar" class="dark ui-should-hide">
        <h1>Deep Space Airships [BETA]</h1>
        <a target="_blank" href="/account/">Account</a>
        <a target="_blank" href="/leaderboard/">Leaderboard</a>
        <a target="_blank" href="/changelog.html">Changelog</a>
        <a target="_blank" href="https://drednot.io/c/roadmap/">Roadmap</a>

        <span>
            <a target="_blank" rel="noopener noreferrer" href="https://old.reddit.com/r/drednot/">
                <i class="fab big-icon fa-reddit-alien"></i><div class="tooltip tooltip-low dark">/r/drednot</div></a>
            <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/DrednotIo">
                <i class="fab big-icon fa-twitter"></i><div class="tooltip tooltip-low dark">@DrednotIo</div></a>
            <a target="_blank" rel="noopener noreferrer" href="https://discord.gg/bZF4myU">
                <i class="fab big-icon fa-discord"></i><div class="tooltip tooltip-low dark">Official Discord Chat</div></a>
            <!--<a target="_blank" rel="noopener noreferrer" href="https://github.com/birdbrainswagtrain/dredark/issues">
                <i class="fas big-icon fa-bug"></i><div class="tooltip dark">Issue Tracker</div></a>-->
            <a target="_blank" rel="noopener noreferrer" href="https://www.patreon.com/cogg">
                <i class="fab fa-patreon"></i></i><div class="tooltip tooltip-low dark">Patreon Page</div></a>
            <a target="_blank" rel="noopener noreferrer" href="https://drednotio.fandom.com/wiki/Drednot.io_Wiki">
                <i class="fas big-icon white fa-atlas"></i><div class="tooltip tooltip-low dark">Unofficial Wiki</div></a>
        </span>

    </div>

    <div id="window-container" class="ui-should-hide">

        <div id="ui-container-left" class="new-ui-container-super">

            <div id="chat" class="closed">
                <div class="close">
                    <button class="btn-red btn-small" id="chat-close">Close</button>
                </div>
                <h3>Local Ship Chat</h3>
                <div id="chat-content">
                </div>
                <div id="chat-autocomplete-container">
                    <div id="chat-autocomplete" class="dark" style="display: none;">

                    </div>
                </div>
                <input id="chat-input" autocomplete="off">
                <button class="btn-green" id="chat-send">Send</button>
                <div style="float:right;">
                    <label><input id="opt_chat_messages" type="checkbox">Hide Messages</label>
                    <label><input id="opt_chat_bubbles"type="checkbox">Hide Bubbles</label>
                </div>
            </div>

            <div class="new-ui-container">

            </div>

            <div id="new-ui-left" class="new-ui-container">
                
            </div>
        </div>

        <div id="station-ui" class="window dark center" style="display: none;">
            <div class="close">
                <button class="btn-red" onclick="closeStationUI();">Close</button>
            </div>
            <h2>Communications</h2>

            <div id="comms-xmits" class="bar">
                <div class="bar-inner" style="background: rgba(255,255,0,.5);"></div>
                <span class="count">5 / 5 Transmissions</span>
            </div>

            <div id="comms-text"></div>

            <input id="comms-input" autocomplete="off">

            <button onclick="sendComms();">Send</button>
        </div>

        <div id="pui" class="window dark center" style="display: none; width: 640px; padding: 0;"></div>

        <div id="disconnect-popup" class="window center dark" style="display: none;"></div>

        <div class="new-ui-container-super right">
            <div id="new-ui-right" class="new-ui-container">
                <div id="cheat-menu" class="dark window" style="display: none;">
                </div>
            </div>
        </div>
    </div>

    <div id="big-ui-container"></div>

    <div id="team_menu" class="window darker ui-should-hide" style="display: none;"></div>

    <div id="motd" class="dark ui-should-hide" style="display: none;">
        <div class="close">
            <button id="motd-toggle" class="btn-small" onclick="toggleMotd();" class="close">Hide</button>
        </div>
        <h2>Team MOTD</h2>
        <div id="motd-content">
            <div id="motd-text">
            </div>
            <button id="motd-edit-button" style="display: none; margin-top: 10px;" class="btn-blue" onclick="editMotd();">Edit</button>
        </div>
        <div id="motd-edit" style="display: none;">
            <textarea id="motd-edit-text"></textarea>
            <br>
            <button class="btn-green" onclick="saveMotd(true);">Save</button>
            <button class="btn-red" onclick="saveMotd(false);">Discard</button>
        </div>
    </div>

    <div id="game-container">
        <canvas id="canvas-game"></canvas>
    </div>

    <div id="item-ui-container" class="ui-should-hide"></div>

    <div id="notify-top" style="display: none;" class="ui-should-hide">
        <div id="notify-top-content" class="dark">
            <div class="close">
                <button class="btn-red" onclick="closeNotifyTop();" class="close">Close</button>
            </div>
            <p style="margin-top: 40px;">
                
            </p>
        </div>
    </div>

    <div id="content-bottom" class="ui-should-hide">
        <div class="button-container">
            <button id="map_button" onclick="toggleUI('map');" class="btn-small" style="display: none;"><i class="fas fa-map"></i> Map</button>
            <button onclick="toggleUI('help');" class="btn-green btn-small"><i class="far fa-question-circle"></i> Help</button>
            <button onclick="toggleUI('quickstart');" class="btn-green btn-small"><i class="fas fa-forward"></i> Quick Start</button>
            <button onclick="toggleUI('settings');" class="btn-yellow btn-small last-left"><i class="fas fa-tools"></i> Settings</button>

            <button id="cheat_menu_button" onclick="teamAct('toggle_cheat_ui');" class="btn-small" style="display: none;"><i class="fas fa-magic"></i> Cheat Menu</button>
            <button id="team_manager_button" onclick="teamAct('toggle_ui');" class="btn-blue btn-small" style="display: none;"><i class="fa fa-cogs"></i> Manage Ship</button>
            <button id="exit_button" onclick="returnToMenu();" class="btn-red btn-small" style="display: none;"><i class="fas fa-door-open"></i> Exit Ship</button>
        </div>
        <div class="center-container-h">
            <div id="bottom-bar" class="dark">
                <a href="mailto:adam@cogg.rocks">Contact (Email)</a>
                &nbsp;&bull;&nbsp;
                <a target="_blank" href="/terms.html">Terms</a>
                &nbsp;&bull;&nbsp;
                <a target="_blank" href="/privacy.html">Privacy</a>
                [
                <span id="nitro-consent" style="display:none">
                    <a href="javascript:window.__cmp('showModal');">
                        Update Cookie Preferences
                    </a>
                </span>
                <span data-ccpa-link="1"></span>
                ]
                &nbsp;&bull;&nbsp;
                <a target="_blank" href="/advertising.html">Advertising</a>
                &nbsp;&bull;&nbsp;
                &copy; 2022 Adam Coggeshall (<a target="_blank" href="/credits.txt">Credits</a>)
            </div>
        </div>
    </div>
    <script>(function(){
function r(n) {if (m[n] == null) {m[n] = {};c[n](r,m[n]);} return m[n];}
r.async=async function(d){(new Function("c",await (await fetch(d.url)).text()))(c);return r(d.id);}
let m = [];let c=r.c=[
function(require,exports) {"use strict";function e(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:true,get:t[n]})}e(exports,{reportError:()=>l,setupErrorLogging:()=>o});const t=32;let n=[];let r=0;let i=null;function l(e){r++;if(r>t){return}let l;if(e instanceof Error){var o;if((o=e.stack)===null||o===void 0?void 0:o.includes("chrome-extension")){return}l={msg:e.message,stack:e.stack}}else if(typeof e=="string"){l={msg:e}}else{return}n.push(l);if(i==null){i=setTimeout(()=>{fetch("/error_report",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});n.length=0;i=null},100)}}function o(){let e=e=>{l(e.error)};window.addEventListener("error",e)}},function(require,exports) {"use strict";function t(t){exports.cl_module=t;exports.sv_module=t}exports.setup_cl=async function(){let e=require(82).setup;let u=await e(t);return u};if(typeof window==="undefined"){require(73);t(require(73))}},function(require,exports) {"use strict";Object.defineProperty(exports,"rescale_windows",{enumerable:true,get:()=>n});const e=require(60);let t=(0,e.RUN_ON_CLIENT)(()=>document.getElementById("window-container"));function n(){t.style.transform="";let e=t.scrollWidth;let n=window.innerWidth;if(e>n){t.style.transform="scale("+n/e+")"}}(0,e.RUN_ON_CLIENT)(()=>{n();window.addEventListener("resize",n)})},function(require,exports) {"use strict";Object.defineProperty(exports,"openDisconnectDialog",{enumerable:true,get:()=>r});const e=require(6);const a=require(54);function r(r,o){let n=document.getElementById("disconnect-popup");n.style.display="";var s;var l=false;switch(r){case e.DropReason.ProtocolError:s="Protocol error. This is either a bug, or you did something you shouldn't have.";l=true;break;case e.DropReason.BadVersion:s="The client's version does not match the server's. Please refresh.";l=true;break;case e.DropReason.ConnectLimit:s="Too many clients are connected from this address. Close existing connections or try a different server.";break;case e.DropReason.ConnectRate:s="This address has been rate limited. Please try again in a few seconds.";break;case e.DropReason.TeamLimit:s="This address has created or loaded too many ships. Please wait or join a loaded ship instead.";break;case e.DropReason.FullPlayers:s="This server is full. You can wait for space to open, or try joining a different server.";break;case e.DropReason.FullTeams:s="This server has reached its ship limit. You can try joining an existing ship, wait for space to open, or try joining a different server.";break;case e.DropReason.TeamNotAvailable:s="This ship is not available to join. It may have been saved.";break;case e.DropReason.InvalidInvite:s="Your invite link was not valid. The ship's link may have changed.";break;case e.DropReason.Kicked:s="You were kicked from this ship. You might still be able to rejoin.";break;case e.DropReason.Banned:s="You were banned from this ship. You can still join another ship or create your own.";break;case e.DropReason.Idle:s="You were kicked for being idle.";break;case e.DropReason.HardBanned:s="Your account or address is banned from the game.";break;case e.DropReason.ShipDestruct:s="Your ship blew up.";break;case e.DropReason.JoinBlocked:s="You were not allowed to join the ship. You (or your IP) may be banned, or the ship is private, or your invite was invalid.";break;case e.DropReason.NoLoad:s="You may not load this ship right now. It may already be loaded, or you do not have permission to load it.";break;case e.DropReason.Saved:s="A Captain saved the ship. If you are a Captain, you can re-load it from the starting menu. Note that it may take several seconds to appear in the list.";break;case e.DropReason.Shutdown:s="The server has shut down. It will probably be back online in a few seconds.";l=true;break;case e.DropReason.ServerError:s="The server encountered an error.";l=true;break;case e.DropReason.GTFO:s="The anti-cheat doesn't like you.";break;default:s=(0,a.h)("div",null,(0,a.h)("p",null,"You were unexpectedly disconnected. There are a few possible reasons for this:"),(0,a.h)("ul",null,(0,a.h)("li",null,"The game server may be updating, restarting, or has crashed."),(0,a.h)("li",null,"There may be issues with our network."),(0,a.h)("li",null,"There may be issues with your network.")));l=true;break}function c(){if(l){document.location.reload();return}n.style.display="none";o()}let t=(0,a.h)("div",null,(0,a.h)("h2",null,"DISCONNECTED"),s,(0,a.h)("p",null,(0,a.h)("button",{class:"btn-green",onClick:c},"Return to Menu")));(0,a.render)(t,n)}},function(require,exports) {"use strict";function e(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:true,get:t[n]})}e(exports,{miscWebSetup:()=>i,parseInviteAndClearURL:()=>a,mobileSetup:()=>o});const t=require(6);const n=require(5);const l=require(47);const r=require(11);function i(){console.log("game version:",n.GAME_VERSION);let e=navigator.userAgent.toLowerCase();let r=document.getElementById("bad-browser");let i=document.getElementById("bad-browser-text");if(e.includes("edge")){r.style.display="";i.innerText="Warning: Edge is not supported. If you experience issues, try using Chrome or Firefox."}else if(e.includes("safari")&&!e.includes("chrome")){r.style.display="";i.innerText="Warning: Safari is not supported. If you experience issues, try using Chrome or Firefox."}window.closeBrowserWarning=function(){r.style.display="none"};{let a=document.createElement("link");a.rel="stylesheet";a.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css";a.integrity="sha256-zmfNZmXoNWBMemUOo1XUGFfc0ihGGLYdgtJS3KCr/l0=";a.crossOrigin="anonymous";document.head.append(a)}if(window.location.hostname!=t.LOCAL_DOMAIN){setTimeout(()=>{console.log("%cSTOP!","color:red;font-size:60pt;background:black;");console.log("%cIf somebody told you to type or copy-paste code on this screen, ignore them. They may be trying to steal your account, your ship, or take some other malicious action. If they claim to be a developer or admin, ignore them. If they claim you can get hacks or free items by doing this, ignore them. THEY ARE LYING!","font-size:20pt");console.log("%cDO NOT PASTE ANYTHING IN THIS WINDOW!","color:red;font-size:20pt;background:black;")},1e3)}window.addEventListener("dragover",e=>{e.preventDefault()});window.addEventListener("drop",e=>{e.preventDefault();if(e.dataTransfer!=null){for(let t=0;t<e.dataTransfer.items.length;t++){let n=e.dataTransfer.items[t];if(l.modFileDB.tryImport(n)){break}}}})}function a(){let e=location.search.match(/\?invite=([a-zA-Z0-9_\-]*)/i);if(e!=null){let t=e[1];let n=location.protocol+"//"+location.host+location.pathname;history.replaceState("","",n);return t}return null}function o(){return new Promise(e=>{let t=navigator.userAgent.toLowerCase().includes("mobile");if(t){(0,r.openPromptEx)("Mobile Device Detected","Enable experimental mobile features? It's probably still going to suck.",r.PromptType.NoClose,async()=>{try{await document.body.requestFullscreen({navigationUI:"hide"});await screen.orientation.lock("landscape")}catch(t){console.log("mobile setup fail",t)}e()},e)}else{e()}})}},function(require,exports) {"use strict";Object.defineProperty(exports,"GAME_VERSION",{enumerable:true,get:()=>e});const e="Fri Dec 2 19:34:10 MST 2022 / 648af5758758aacaac127b86df6bcad7885e9657"},function(require,exports) {"use strict";function n(n,$){for(var E in $)Object.defineProperty(n,E,{enumerable:true,get:$[E]})}n(exports,{GravityDir:()=>no,GameRank:()=>nS,TeamRank:()=>nt,CrewRank:()=>nT,TeamPrivacy:()=>nc,ZoneDanger:()=>nI,DropReason:()=>nA,SubworldBlockTypes:()=>n_,OverworldBlockTypes:()=>ns,BlockShapes:()=>nM,EquipmentSlot:()=>nO,USE_COMBAT_DESTRUCTION:()=>$,LOCAL_DOMAIN:()=>E,BASE_DOMAIN:()=>o,TEST_DOMAIN:()=>S,TEST_GAME_DOMAIN:()=>t,GAME_DOMAINS:()=>T,GAME_SERVER_NAMES:()=>c,MASTER_DOMAIN:()=>I,TEST_MASTER_DOMAIN:()=>A,LOCKDOWN_BASE_TIME:()=>_,BAD_CHAT_WARNING:()=>s,MAX_USE_DISTANCE:()=>M,MAX_BUILD_DISTANCE:()=>O,MAX_VIEW_DIST:()=>N,MAX_TEAM_LENGTH:()=>R,MAX_CHAT_LENGTH:()=>C,MAX_MOTD_LENGTH:()=>D,MAX_SIGN_LENGTH:()=>H,MAX_SIGN_COUNT:()=>L,MAX_COMBAT_RATING_1:()=>P,MAX_COMBAT_RATING_2:()=>r,BASE_SHIP_WIDTH:()=>G,BASE_SHIP_HEIGHT:()=>a,MAX_SHIP_SIZE:()=>B,MIN_DAMAGE_SHIP_SIZE:()=>e,MIN_SHIP_SIZE:()=>U,SHIP_HP_BASE:()=>i,SHIP_HP_EXPAND:()=>u,SHIP_HP_SPAWN:()=>X,OVERWORLD_TILE_REGEN_TIME:()=>v,OVERWORLD_BOT_DENSITY:()=>f,SHIP_OBJECT_CONSTRUCT_DESTRUCT_TIME:()=>W,SHIP_BLOCK_CONSTRUCT_DESTRUCT_TIME:()=>F,TASK_CONSTRUCT_COLOR:()=>K,TASK_DESTRUCT_COLOR:()=>l,SHIP_PER_IP_LOAD_TIME:()=>V,SHIP_PER_IP_LOAD_MAX:()=>k,SHIP_EXPIRE_SECS:()=>p,AFK_KICK_SECS:()=>Y,AFK_WARN_SECS:()=>Z,PLAYER_INVENTORY_SIZE:()=>m,PLAYER_BASE_INVENTORY_SIZE:()=>y,ADDR_CONNECT_LIMIT:()=>d,COMMS_MSG_LIMIT:()=>w,COMMS_MSG_REGEN:()=>x,COMMS_MSG_BUFFER_LEN:()=>b,CREW_LOG_LENGTH:()=>g,REACH_THROUGH_WALKWAY_DIST:()=>h,REACH_THROUGH_SOLID_DIST:()=>q,MISSION_FLUX_CHANCE:()=>J,MISSION_INTERVAL:()=>j,MISSION_TIME:()=>z,MISSION_TREASURE_MUL:()=>Q,THRUSTER_BOOST_TIME:()=>n8,MAX_LAUNCHER_POWER:()=>nn,DEFAULT_BG_COLOR:()=>n$,COMMS_BUBBLE_TIME:()=>nE});const $=true;const E="local.drednot.io";const o="drednot.io";const S="test.drednot.io";const t="t0.drednot.io";const T=["d0.drednot.io","d1.drednot.io","s2.drednot.io"];const c=["US East","Europe (Poland)","Asia (Singapore)"];const I="master.drednot.io";const A="test-master.drednot.io";const _=30;const s="<b class='warning-text'>WARNING: Extremely explicit or bigoted speech is not permitted. Continued use or attempts to evade the filter may result in a ban.</b>";const M=2.5;const O=5;const N=180;const R=32;const C=300;const D=4096;const H=32;const L=100;const P=2500;const r=5e3;const G=11;const a=8;const B=80;const e=8;const U=4;const i=100;const u=100;const X=i+(G+a)*u;const v=60*14;const f=.002;const W=1;const F=0;const K=65280;const l=16711680;const V=60;const k=4;const p=180;const Y=5*60;const Z=4*60;const m=22;const y=5;const d=10;const w=5;const x=10;const b=64;const g=500;const h=.8;const q=.1;const J=.1;const j=45;const z=15;const Q=.5;const n8=20;const nn=30;const n$=250;const nE=30;var no;(function(no){no[no["Down"]=0]="Down";no[no["Up"]=1]="Up";no[no["Left"]=2]="Left";no[no["Right"]=3]="Right"})(no||(no={}));var nS;(function(nS){nS[nS["Guest"]=0]="Guest";nS[nS["GameMaster"]=1]="GameMaster";nS[nS["PatronBronze"]=2]="PatronBronze";nS[nS["PatronSilver"]=3]="PatronSilver";nS[nS["PatronGold"]=4]="PatronGold";nS[nS["PatronPlat"]=5]="PatronPlat";nS[nS["PatronFlux"]=6]="PatronFlux"})(nS||(nS={}));var nt;(function(nt){nt[nt["Guest"]=0]="Guest";nt[nt["Crew"]=1]="Crew";nt[nt["CrewInvitePending_DEPRECATED"]=2]="CrewInvitePending_DEPRECATED";nt[nt["Captain"]=3]="Captain";nt[nt["Banned"]=4]="Banned"})(nt||(nt={}));var nT;(function(nT){nT[nT["C_Guest"]=0]="C_Guest";nT[nT["C_Crew"]=1]="C_Crew";nT[nT["MAX_CUSTOM"]=20]="MAX_CUSTOM";nT[nT["Owner"]=21]="Owner";nT[nT["Banned"]=22]="Banned";nT[nT["MAX_ASSIGNABLE"]=22]="MAX_ASSIGNABLE";nT[nT["AnyCaptain"]=29]="AnyCaptain";nT[nT["AnyUser"]=30]="AnyUser"})(nT||(nT={}));var nc;(function(nc){nc[nc["Public"]=0]="Public";nc[nc["InviteOnly"]=1]="InviteOnly";nc[nc["MAX_VALUE"]=2]="MAX_VALUE"})(nc||(nc={}));var nI;(function(nI){nI[nI["Safe"]=0]="Safe";nI[nI["LowDanger"]=1]="LowDanger";nI[nI["HighDanger"]=2]="HighDanger"})(nI||(nI={}));var nA;(function(nA){nA[nA["ProtocolError"]=4e3]="ProtocolError";nA[nA["BadVersion"]=4001]="BadVersion";nA[nA["ConnectLimit"]=4002]="ConnectLimit";nA[nA["ConnectRate"]=4003]="ConnectRate";nA[nA["TeamLimit"]=4004]="TeamLimit";nA[nA["FullPlayers"]=4005]="FullPlayers";nA[nA["FullTeams"]=4006]="FullTeams";nA[nA["TeamNotAvailable"]=4007]="TeamNotAvailable";nA[nA["Kicked"]=4008]="Kicked";nA[nA["Banned"]=4009]="Banned";nA[nA["Idle"]=4010]="Idle";nA[nA["ShipDestruct"]=4011]="ShipDestruct";nA[nA["JoinBlocked"]=4012]="JoinBlocked";nA[nA["HardBanned"]=4013]="HardBanned";nA[nA["NoLoad"]=4014]="NoLoad";nA[nA["Saved"]=4015]="Saved";nA[nA["InvalidInvite"]=4016]="InvalidInvite";nA[nA["Shutdown"]=4017]="Shutdown";nA[nA["ServerError"]=4018]="ServerError";nA[nA["GTFO"]=4019]="GTFO"})(nA||(nA={}));var n_;(function(n_){n_[n_["_BUILD_SURFACE"]=-1]="_BUILD_SURFACE";n_[n_["AIR"]=0]="AIR";n_[n_["HULL_CORNER"]=1]="HULL_CORNER";n_[n_["HULL_H"]=2]="HULL_H";n_[n_["HULL_V"]=3]="HULL_V";n_[n_["INTERIOR_BLOCK"]=4]="INTERIOR_BLOCK";n_[n_["LADDER"]=5]="LADDER";n_[n_["WALKWAY"]=6]="WALKWAY";n_[n_["ITEM_NET"]=7]="ITEM_NET";n_[n_["RAMP_1"]=8]="RAMP_1";n_[n_["RAMP_2"]=9]="RAMP_2";n_[n_["RAMP_3"]=10]="RAMP_3";n_[n_["RAMP_4"]=11]="RAMP_4";n_[n_["COLOR_PANEL"]=12]="COLOR_PANEL";n_[n_["HYPER_RUBBER"]=13]="HYPER_RUBBER";n_[n_["ICE_GLASS"]=14]="ICE_GLASS"})(n_||(n_={}));var ns;(function(ns){ns[ns["AIR"]=0]="AIR";ns[ns["WALL"]=1]="WALL";ns[ns["UNBREAKABLE"]=2]="UNBREAKABLE";ns[ns["TREASURE"]=3]="TREASURE";ns[ns["BLANK"]=4]="BLANK";ns[ns["FLUX"]=5]="FLUX";ns[ns["SLEEPING_BOT"]=6]="SLEEPING_BOT";ns[ns["BOT_RED"]=7]="BOT_RED";ns[ns["STRONG_WALL"]=8]="STRONG_WALL";ns[ns["ROCK"]=9]="ROCK";ns[ns["ROCK_METAL"]=10]="ROCK_METAL";ns[ns["ROCK_FLUX"]=11]="ROCK_FLUX"})(ns||(ns={}));var nM;(function(nM){nM[nM["BLOCK"]=0]="BLOCK";nM[nM["RAMP_UR"]=1]="RAMP_UR";nM[nM["RAMP_DR"]=2]="RAMP_DR";nM[nM["RAMP_DL"]=3]="RAMP_DL";nM[nM["RAMP_UL"]=4]="RAMP_UL";nM[nM["SLAB_U"]=5]="SLAB_U";nM[nM["SLAB_R"]=6]="SLAB_R";nM[nM["SLAB_D"]=7]="SLAB_D";nM[nM["SLAB_L"]=8]="SLAB_L";nM[nM["HALF_RAMP_1_U"]=9]="HALF_RAMP_1_U";nM[nM["HALF_RAMP_1_R"]=10]="HALF_RAMP_1_R";nM[nM["HALF_RAMP_1_D"]=11]="HALF_RAMP_1_D";nM[nM["HALF_RAMP_1_L"]=12]="HALF_RAMP_1_L";nM[nM["HALF_RAMP_2_U"]=13]="HALF_RAMP_2_U";nM[nM["HALF_RAMP_2_R"]=14]="HALF_RAMP_2_R";nM[nM["HALF_RAMP_2_D"]=15]="HALF_RAMP_2_D";nM[nM["HALF_RAMP_2_L"]=16]="HALF_RAMP_2_L";nM[nM["HALF_RAMP_1_UI"]=17]="HALF_RAMP_1_UI";nM[nM["HALF_RAMP_1_RI"]=18]="HALF_RAMP_1_RI";nM[nM["HALF_RAMP_1_DI"]=19]="HALF_RAMP_1_DI";nM[nM["HALF_RAMP_1_LI"]=20]="HALF_RAMP_1_LI";nM[nM["HALF_RAMP_2_UI"]=21]="HALF_RAMP_2_UI";nM[nM["HALF_RAMP_2_RI"]=22]="HALF_RAMP_2_RI";nM[nM["HALF_RAMP_2_DI"]=23]="HALF_RAMP_2_DI";nM[nM["HALF_RAMP_2_LI"]=24]="HALF_RAMP_2_LI";nM[nM["_END"]=25]="_END"})(nM||(nM={}));var nO;(function(nO){nO[nO["LastGeneralSlot"]=15]="LastGeneralSlot";nO[nO["Head"]=16]="Head";nO[nO["Face"]=17]="Face";nO[nO["Body"]=18]="Body";nO[nO["Back"]=19]="Back";nO[nO["Hands"]=20]="Hands";nO[nO["Feet"]=21]="Feet"})(nO||(nO={}))},function(require,exports) {"use strict";function e(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:true,get:t[n]})}e(exports,{ProfanityMode:()=>r,USER_SETTINGS:()=>a,cloneUserSettings:()=>i});const t=require(37);const n=require(62);var r;(function(r){r[r["Off"]=0]="Off";r[r["Moderate"]=1]="Moderate";r[r["Strict"]=2]="Strict"})(r||(r={}));let s={volume:.3,profanity_mode:r.Strict,chat_hide_bubbles:false,chat_hide_messages:false,menu_zoom:200,always_show_ammo:false,hide_game_rank:false,preferred_server:-1,player_appearance:(0,t.getDefaultOutfit)(),menu_ship_filter:null,menu_ship_sort:null,hide_shipyard_menu_panel:false,zoom_speed:1};const a=new Proxy({},{get:(e,t)=>{return s[t]},set:(e,t,n)=>{s[t]=n;o();return true}});function i(){return JSON.parse(JSON.stringify(s))}function o(){localStorage.setItem("dredark_user_settings",JSON.stringify(s))}if(typeof window!="undefined"){let l=localStorage.getItem("dredark_user_settings");if(l!=null){let f=JSON.parse(l);Object.assign(s,f)}else{try{let u=JSON.parse(atob((0,n.getCookie)("user_settings")));Object.assign(s,u);o();(0,n.deleteCookie)("user_settings")}catch(m){}}}},function(require,exports) {"use strict";function e(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:true,get:n[t]})}e(exports,{CONNECT_PROTO:()=>l,SERVERS:()=>o,QUERY_DOMAIN:()=>r,QUERY_DOMAIN_SIMPLE:()=>i,pingServers:()=>c,updateServerPlayers:()=>A});const n=require(6);const t=require(57);const a=require(56);const l="wss:";let o;let r;let i;if((0,a.getHostName)()==n.LOCAL_DOMAIN){o=[{index:0,domain:n.LOCAL_DOMAIN,description:"Local Test 1",player_count:0,max_player_count:0},{index:1,domain:n.LOCAL_DOMAIN,description:"Local Test 2",player_count:0,max_player_count:0},{index:2,domain:n.LOCAL_DOMAIN,description:"Local Test 3",player_count:0,max_player_count:0},];r=n.LOCAL_DOMAIN;i=n.LOCAL_DOMAIN}else if((0,a.getHostName)()==n.TEST_DOMAIN){o=[{index:0,domain:n.TEST_GAME_DOMAIN,description:"Public Test",player_count:0,max_player_count:0}];r=n.TEST_MASTER_DOMAIN;i=n.TEST_DOMAIN}else{o=[{index:0,domain:n.GAME_DOMAINS[0],description:n.GAME_SERVER_NAMES[0],player_count:0,max_player_count:0},{index:1,domain:n.GAME_DOMAINS[1],description:n.GAME_SERVER_NAMES[1],player_count:0,max_player_count:0},{index:2,domain:n.GAME_DOMAINS[2],description:n.GAME_SERVER_NAMES[2],player_count:0,max_player_count:0},];r=n.MASTER_DOMAIN;i=n.BASE_DOMAIN}function c(){let e=[];for(let n=0;n<o.length;n++){e.push((0,t.settle)((0,t.timeout)(5e3,p(n))))}return Promise.all(e)}function p(e){return new Promise((n,t)=>{let a=o[e].domain;let r=l+"//"+a+":4000/";let i=new WebSocket(r);let c;i.onopen=()=>{c=performance.now();i.send("yo")};i.onmessage=a=>{let l=a.data;i.close();if(l!=""&&c!=null){let r=performance.now()-c;let p=JSON.parse(l);o[e].player_count=p.player_count;o[e].max_player_count=p.player_max;o[e].ping=r;let A=o[e].update_callback;if(A!=null){A()}n()}else{t(Error("bad ping"))}}})}function A(e,n,t){o[e].player_count=n;o[e].max_player_count=t;let a=o[e].update_callback;if(a!=null){a()}}},function(require,exports) {"use strict";Object.defineProperty(exports,"checkNotice",{enumerable:true,get:()=>$});const l=require(54);const e=require(11);const n=require(62);const t=15;const o=(0,l.h)("div",null,(0,l.h)("ul",null,(0,l.h)("li",null,"You must be at least 13 years of age to play this game."),(0,l.h)("li",null,"Chrome or Firefox are recommended. Other browsers might not work."),(0,l.h)("li",null,"This games's ",(0,l.h)("a",{target:"_blank",href:"terms.html"},"Terms")," were revised on ",(0,l.h)("b",null,"November 21, 2022"),"."),(0,l.h)("li",null,"This games's ",(0,l.h)("a",{target:"_blank",href:"privacy.html"},"Privacy Policy")," was revised on ",(0,l.h)("b",null,"June 18, 2020"),"."),(0,l.h)("li",null,"This game uses cookies. For more information, check the Privacy Policy."),(0,l.h)("li",null,"This game is not designed or optimized for mobile devices.")),(0,l.h)("p",null,"By clicking below and continuing to use this Service, you agree to our Terms and Privacy Policy."));function $(l){let $=parseInt((0,n.getCookie)("notice_version"));if(!Number.isFinite($)){$=0}if($<t){(0,e.openPromptEx)("NOTICE (UPDATED)",o,e.PromptType.NoClose|e.PromptType.AcceptOnly,()=>{(0,n.setCookie)("notice_version",t);l()})}else{l()}}},function(require,exports) {"use strict";Object.defineProperty(exports,"StartUIShipyard",{enumerable:true,get:()=>S});const e=require(54);const t=require(57);const s=require(45);const l=require(58);const h=require(11);const i=require(59);const n=require(8);const a=require(7);const r=require(31);const o=require(14);class c extends e.Component{render(){return(0,e.h)("div",{id:this.props.id},(0,e.h)("p",null,"Don't want to see ads? That's fine!"),(0,e.h)("p",null,"Please consider ",(0,e.h)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.patreon.com/cogg"},"supporting continued development"),"."))}constructor(...e){super(...e);this.shouldComponentUpdate=()=>false}}const p=150;class u extends e.Component{render(){let t=this.props.icon_path;let s=(0,l.getEarlyImageURL)("no_ship_icon");let h=t?"url("+t+"), url("+s+")":"url("+s+")";let i=this.props.scale+"px";let n={"background-color":this.props.color,"background-image":h,width:i,height:i};let a=(0,e.h)("div",{class:"tip dark "+this.state.tip_class,style:"width: 200px;"},(0,e.h)("h3",null,(0,r.filterWords)(this.props.name)));let o=e=>{var t;let s=e.target;let l=(t=s.parentElement)===null||t===void 0?void 0:t.clientWidth;if(l!=null){let h=s.offsetLeft+s.clientWidth/2;if(h>l/2){this.setState({tip_class:"right"})}else{this.setState({tip_class:"left"})}}};if(this.props.scale>p){return(0,e.h)("div",{class:"shipyard-item",style:n,onClick:this.props.onSelect,onMouseEnter:o},(0,e.h)("div",{class:"sy-title"},(0,e.h)("h3",null,(0,r.filterWords)(this.props.name)),this.props.info_fragment),(0,e.h)("span",{class:"sy-id"},"{"+this.props.hex_code+"}"),(0,e.h)("span",{class:"sy-crew"},this.props.crew_count," ",(0,e.h)("i",{class:"fas fa-user"})),a)}return(0,e.h)("div",{class:"shipyard-item",style:n,onClick:this.props.onSelect,onMouseEnter:o},a)}constructor(e,t){super(e,t);this.state={tip_class:""}}}class $ extends e.Component{componentDidMount(){(0,s.initAds)(this.props.show_ads)}async setup(){(0,n.pingServers)();this.setServer(a.USER_SETTINGS.preferred_server)}setServer(e,t=true){a.USER_SETTINGS.preferred_server=e;this.setState({connect_server:e},()=>{if(t){this.refreshShipList()}})}async refreshShipList(){let e=this.state.connect_server;if(e<0){return}try{let t=await fetch("//"+n.QUERY_DOMAIN_SIMPLE+"/shiplist?server="+e);if(!t.ok){throw new Error("fetch failed: "+await t.text())}let s=await t.json();(0,n.updateServerPlayers)(e,s.player_count,s.max_player_count);let l={scoreboard:s.ships};this.setState(l)}catch(h){this.setState({override_text:"Failed to load ship list.",scoreboard:undefined});console.log("failed to load ship list",h)}}joinShip(e){this.props.join_callback(this.state.connect_server,{type:"join_or_load",id:e})}render(){let s=n.SERVERS.map((t,s)=>{return(0,e.h)(i.ServerOption,{server_id:s,selected:s==this.state.connect_server})});let l=e=>{this.setServer(parseInt(e.target.value))};let r=[];let p=this.state.scoreboard!=null;if(p){let $=[];for(let d in this.state.scoreboard){$.push({id:+d,ship:this.state.scoreboard[d]})}if(this.state.sort=="name"){$.sort((e,t)=>e.ship.team_name.localeCompare(t.ship.team_name))}else{$.sort((e,t)=>{if(e.ship.saved!=t.ship.saved){return+t.ship.saved-+e.ship.saved}if(e.ship.player_count!=0||t.ship.player_count!=0){return t.ship.player_count-e.ship.player_count}if(e.ship.time!=null&&t.ship.time!=null){return t.ship.time-e.ship.time}return 1})}let f=new t.Searcher(this.state.search);$.forEach(t=>{let s=t.id;let l=t.ship;let h=()=>{this.joinShip(s)};if(this.state.search!=""){if(!f.find_in(l.team_name)&&!f.find_in("{"+l.hex_code+"}")&&!f.find_in(l.zone)){return}}let i=null;if(this.state.filter=="online"){if(l.saved){return}}else if(this.state.filter=="saved"){if(!l.saved){return}}else if(this.state.filter=="owned"){if(!l.owned){return}}if(l.saved){if(l.zone!=null){i=(0,e.h)("span",{style:"color:#0F0;"},(0,e.h)("i",{class:"far fa-save"})," Saved @ ",l.zone)}else{i=(0,e.h)("span",{style:"color:#0F0;"},(0,e.h)("i",{class:"far fa-save"})," Saved")}}r.push((0,e.h)(u,{color:l.color,hex_code:l.hex_code,name:l.team_name,crew_count:l.player_count,info_fragment:i,onSelect:h,scale:this.state.scale,icon_path:l.icon_path}))})}let S=()=>{(0,h.openPromptRename)("","",(e,t)=>{this.props.join_callback(this.state.connect_server,{type:"new",name:e,color:t})},true)};let m=()=>{(0,h.openPromptRename)("","",(e,t)=>{this.props.join_callback(this.state.connect_server,{type:"labs",name:e,color:t})},true,true)};let y=[];let v=[];let E=[];let g={width:this.state.scale+"px",height:this.state.scale+"px"};let k={"font-size":this.state.scale*.6+"px","line-height":this.state.scale*.5+"px","height":this.state.scale*.7+"px"};y.push((0,e.h)("button",{class:"btn-green",style:g,onClick:S},(0,e.h)("div",{style:k},(0,e.h)("i",{class:"fas fa-plus"})),this.state.scale>80&&"New Ship"));y.push((0,e.h)("button",{class:"btn-pink",style:g,onClick:m},(0,e.h)("div",{style:k},(0,e.h)("i",{class:"fas fa-flask"})),this.state.scale>80&&"Join Labs"));const C=400;let T=this.state.scale+10;let I=Math.floor((window.innerWidth-400-20)/T);let w=Math.ceil(C/T);let R=w*I;r.forEach((e,t)=>{if(t<R){y.push(e)}else if(t<R*2){v.push(e)}else{E.push(e)}});let x=e=>{this.setState({filter:e});a.USER_SETTINGS.menu_ship_filter=e};let U=e=>{this.setState({sort:e});a.USER_SETTINGS.menu_ship_sort=e};let b=e=>{this.setState({hide_menu:e});a.USER_SETTINGS.hide_shipyard_menu_panel=e};let N=()=>x(null);let G=()=>x("saved");let j=()=>x("online");let z=()=>x("owned");let L=()=>U(null);let M=()=>U("name");let P=this.props.show_ads;let W;if(!this.state.hide_menu){W=(0,e.h)("div",{class:"window dark",style:"width: 350px"},(0,e.h)("button",{style:"position:absolute;right:2px;top:2px;",onClick:()=>b(true)},"← Hide Menu"),(0,e.h)("section",null,(0,e.h)("h3",null,"Server"),(0,e.h)("select",{onChange:l},s)),(0,e.h)("section",null,(0,e.h)("h3",null,"Account"),(0,o.renderAccountInfo)()),(0,e.h)("section",null,(0,e.h)("h3",{style:"display:inline-block;"},"Ship List"),(0,e.h)("button",{class:"btn-small",style:"float:right;",onClick:()=>{this.refreshShipList()}},"Refresh ↻"),(0,e.h)("p",null,(0,e.h)("b",null,"Search:")," ",(0,e.h)("input",{value:this.state.search,onInput:e=>this.setState({search:e.target.value})})),(0,e.h)("p",null,(0,e.h)("b",null,"Filter: "),(0,e.h)("button",{class:this.state.filter==null?"btn-green":"",onClick:N},"All"),(0,e.h)("button",{class:this.state.filter=="online"?"btn-green":"",onClick:j},"Online"),(0,e.h)("button",{class:this.state.filter=="saved"?"btn-green":"",onClick:G},"Saved"),(0,e.h)("button",{class:this.state.filter=="owned"?"btn-green":"",onClick:z},"Owned")),(0,e.h)("p",null,(0,e.h)("b",null,"Sort: "),(0,e.h)("button",{class:this.state.sort==null?"btn-green":"",onClick:L},"Default",(0,e.h)("div",{class:"tooltip dark"},"Saved ships by recently loaded,",(0,e.h)("br",null),"then online ships by player count.")),(0,e.h)("button",{class:this.state.sort=="name"?"btn-green":"",onClick:M},"By Name")),(0,e.h)("p",null,(0,e.h)("b",null,"Icon Scale: ")," ",(0,e.h)("input",{type:"range",min:"50",max:"300",value:this.state.scale,class:"slider",onInput:e=>this.setState({scale:+e.target.value}),onChange:e=>{a.USER_SETTINGS.menu_zoom=+e.target.value}}))))}else{W=(0,e.h)("button",{style:"position:absolute;pointer-events:auto;z-index:5;",onClick:()=>b(false)},"→ Show Menu")}return(0,e.h)("div",{id:"shipyard"},W,(0,e.h)("div",{id:"shipyard-ships"},(0,e.h)("div",{style:{"display":p?"none":""}},(0,e.h)("h2",null,this.state.override_text)),(0,e.h)("div",{style:{"display":p?"":"none"}},(0,e.h)("div",{class:"shipyard-ad",style:{"display":P?"":"none"}},(0,e.h)("div",{class:"dark"},(0,e.h)("h4",null,"Advertisement")," ",(0,e.h)(c,{id:"new-ad-slot-1"}))),(0,e.h)("h2",{style:"color:#FFF;"},"Click a ship to join!"),(0,e.h)("div",{class:"shipyard-bin"},y),(0,e.h)("div",{class:"shipyard-ad",style:{"display":P&&y.length!=0?"":"none"}},(0,e.h)("div",{class:"dark"},(0,e.h)("h4",null,"Advertisement")," ",(0,e.h)(c,{id:"new-ad-slot-2"}))),(0,e.h)("div",{class:"shipyard-bin"},v),(0,e.h)("div",{class:"shipyard-ad",style:{"display":P&&v.length!=0?"":"none"}},(0,e.h)("div",{class:"dark"},(0,e.h)("h4",null,"Advertisement")," ",(0,e.h)(c,{id:"new-ad-slot-3"}))),(0,e.h)("div",{class:"shipyard-bin"},E))))}constructor(e){super(e);this.state={override_text:"Loading...",connect_server:-1,search:"",scale:a.USER_SETTINGS.menu_zoom,filter:a.USER_SETTINGS.menu_ship_filter,sort:a.USER_SETTINGS.menu_ship_sort,hide_menu:a.USER_SETTINGS.hide_shipyard_menu_panel}}}let d=null;function f(e){d=e}class S{setOpen(e){let t=document.getElementById("big-ui-container");t.style.display=e?"":"none"}render(t){let s=document.getElementById("big-ui-container");(0,e.render)((0,e.h)($,{join_callback:t,ref:f,show_ads:this.show_ads}),s);if(d!=null){d.setup()}}constructor(){this.show_ads=false}}},function(require,exports) {"use strict";function l(l,t){for(var e in t)Object.defineProperty(l,e,{enumerable:true,get:t[e]})}l(exports,{PromptType:()=>p,closeModal:()=>o,openModal:()=>a,openPrompt:()=>i,openPromptEx:()=>u,openPromptRename:()=>$,openPromptConfirm:()=>f});const t=require(54);const e=require(6);const s=require(14);let n=false;function o(){n=false;(0,t.render)((0,t.h)("div",{style:"display:none;"}),document.body)}function a(l,e=false,s=false){if(n){return}n=true;let a=document.activeElement;if(a instanceof HTMLElement){a.blur()}let c=(0,t.h)("div",{class:"modal-container"},(0,t.h)("div",{class:"modal-window window darker",style:e?"background: #4f1c1c !important;":undefined},s?null:(0,t.h)("div",{class:"close"},(0,t.h)("button",{class:"btn-red",onClick:()=>o()},"Close")),l));(0,t.render)(c,document.body)}class c extends t.Component{render(){let l=this.props.callback;let e=this.props.fail_callback;let s=e!=null?()=>{e();o()}:o;return(0,t.h)("div",null,(0,t.h)("h2",null,this.props.title),!!(this.props.type&p.Formatted)?(0,t.h)("pre",null,this.props.msg):(0,t.h)("p",null,this.props.msg),l!=null?!!(this.props.type&p.AcceptOnly)?(0,t.h)("div",{class:"center-container-h"},(0,t.h)("button",{class:"btn-green btn-large",onClick:()=>{l();o()}},"Accept")):!!(this.props.type&p.RetryOnly)?(0,t.h)("div",null,(0,t.h)("button",{class:"btn-green",onClick:()=>{l();o()}},"Retry")):(0,t.h)("div",null,(0,t.h)("button",{class:"btn-green",onClick:()=>{l();o()}},"Okay"),(0,t.h)("button",{class:"btn-red",onClick:s},"Cancel")):!!(this.props.type&p.NoClose)?null:(0,t.h)("div",null,(0,t.h)("button",{onClick:s},"Okay")))}}class r extends t.Component{render(){return(0,t.h)("div",null,this.props.is_lab?(0,t.h)("div",{style:"height: 150px;"},(0,t.h)("h2",null,"New Ship (Labs)"),(0,t.h)("p",null,"The Labs are special, short-term games for testing new content. Ships in the Labs are ",(0,t.h)("b",null,"temporary")," and may not be saved or used in the main game. The game will attempt to place you on your existing ship if one exists."),(0,t.h)("p",null,"Select a name and color for your new ship.")):this.props.is_create?(0,t.h)("div",{style:"height: 150px;"},(0,t.h)("h2",null,"New Ship"),(0,t.h)("p",null,"Select a name and color for your new ship.")):(0,t.h)("div",{style:"height: 150px;"},(0,t.h)("h2",null,"Rename Ship")),(0,t.h)("input",{style:"margin-bottom: 5px",maxLength:e.MAX_TEAM_LENGTH,value:this.state.name,onInput:l=>(0,s.handleInput)(l,l=>this.setState({name:l}))}),(0,t.h)(s.ColorPicker,{color:this.state.color,onColorUpdate:l=>this.setState({color:l})}),(0,t.h)("br",null),(0,t.h)("button",{class:"btn-green",onClick:()=>{this.props.callback(this.state.name,this.state.color);o()}},this.props.is_create?"Launch":"Rename"),(0,t.h)("button",{class:"btn-red",onClick:o},"Cancel"))}constructor(l){super(l);this.state={name:l.name,color:l.color}}}class h extends t.Component{checkConfirmed(){let l=this.state.confirm.trim();return l=="confirm"||l=='"confirm"'}render(){let l=this.props.callback;let e=o;let n=this.checkConfirmed();return(0,t.h)("div",null,(0,t.h)("h2",null,this.props.title),(0,t.h)("p",null,this.props.msg),(0,t.h)("p",null,'Type "confirm" in the text box and click the green button if you want to proceed.'),(0,t.h)("input",{style:"margin-bottom: 5px",value:this.state.confirm,onInput:l=>(0,s.handleInput)(l,l=>this.setState({confirm:l}))}),(0,t.h)("div",null,(0,t.h)("button",{class:"btn-green",disabled:!n,onClick:()=>{if(n){l();o()}}},"Okay"),(0,t.h)("button",{class:"btn-red",onClick:e},"Cancel")))}constructor(l){super(l);this.state={confirm:""}}}function i(l,e,s,n=false,o=false,r){let h=0;if(n){h|=p.Danger}if(o){h|=p.NoClose|p.Formatted}a((0,t.h)(c,{title:l,msg:e,type:h,callback:s,fail_callback:r}),n,o)}var p;(function(p){p[p["AcceptOnly"]=4]="AcceptOnly";p[p["Danger"]=8]="Danger";p[p["NoClose"]=16]="NoClose";p[p["Formatted"]=32]="Formatted";p[p["RetryOnly"]=64]="RetryOnly"})(p||(p={}));function u(l,e,s,n,o){a((0,t.h)(c,{title:l,msg:e,type:s,callback:n,fail_callback:o}),!!(s&p.Danger),!!(s&p.NoClose))}function $(l,e,s,n=false,o=false){a((0,t.h)(r,{callback:s,name:l,color:e,is_create:n,is_lab:o}))}function f(l,e,s){a((0,t.h)(h,{title:l,msg:e,callback:s}),true)}},function(require,exports) {"use strict";Object.defineProperty(exports,"analyticsInit",{enumerable:true,get:()=>n});const e=require(45);const r=require(46);function t(){let e=window.gtag;return e}function n(){if((0,r.isHeadless)()){return}(0,e.loadScript)("https://www.googletagmanager.com/gtag/js?id=UA-134208590-1");let n=t();n("js",new Date);n("config","UA-134208590-1",{ignore_referrer:"true"})}},function(require,exports) {"use strict";Object.defineProperty(exports,"checkAccountOrPromptLogin",{enumerable:true,get:()=>o});const e=require(54);const t=require(62);const n=require(11);const s=require(57);const l=require(63);async function o(){let e=await fetch("/account/status");if(!e.ok){(0,n.openPromptEx)("Error","Failed to fetch account info. The servers might be updating or down.",n.PromptType.Danger|n.PromptType.NoClose);throw new Error("Failed to fetch account info.")}let t=await e.json();if(t.account==null){return await a()}else{return t}}class r extends e.Component{async selectAnon(){this.setState({s:"wait"});{let e=await fetch("/account/login/anon",{method:"POST"});if(!e.ok){this.setState({error:"Anonymous login failed. Try again in a minute."});return}}{let t=await fetch("/account/status");if(!t.ok){this.setState({error:"Failed to fetch account info."});return}this.props.resolve(await t.json())}}async restoreAnon(){this.setState({s:"wait"});var e;(0,t.setCookie)("anon_key",(e=this.state.anon_key)!==null&&e!==void 0?e:"");let n=await fetch("/account/status");if(!n.ok){this.setState({error:"Failed to fetch account info."});return}this.props.resolve(await n.json())}render(){let n=(0,t.getCookie)("last_login_service");if(this.state.error!=null){return(0,e.h)("div",null,(0,e.h)("p",null,(0,e.h)("b",null,"ERROR:")," ",this.state.error),(0,e.h)("button",{onClick:()=>location.reload()},"Reload"))}else if(this.state.s=="wait"){return(0,e.h)("div",null,(0,e.h)("p",null,"Please wait..."))}else if(this.state.s=="restore_anon"){var o;let r=(0,s.checkKey)((o=this.state.anon_key)!==null&&o!==void 0?o:"");return(0,e.h)("div",null,(0,e.h)("h2",null,"Restore Account Key"),(0,e.h)("p",null,"You can paste an anonymous key here to use the associated account."),(0,e.h)("input",{onInput:()=>{return this.setState({anon_key:(event===null||event===void 0?void 0:event.target).value})},maxLength:24,style:"font-family:monospace;"}),(0,e.h)("br",null),(0,e.h)("button",{onClick:()=>this.setState({s:undefined})},"Cancel"),(0,e.h)("button",{onClick:this.restoreAnon.bind(this),class:"btn-green",disabled:!r},"Submit"))}else{return(0,e.h)("div",null,(0,e.h)("h2",null,"Log In?"),(0,e.h)("button",{class:"btn-large btn-green",onClick:this.selectAnon.bind(this)},"No, Play Anonymously"),(0,l.renderLoginButtons)(n),(0,e.h)("p",null,"You do not need to log in to play, but it is recommended. Logging in will help secure your account and provides extra character customization options. You can choose to play anonymously at first then switch later without losing anything."),(0,e.h)("p",null,(0,e.h)("a",{href:"javascript:void;",onClick:()=>this.setState({s:"restore_anon",anon_key:""})},"Restore old anonymous key")))}}}async function a(){let t=await new Promise((t,s)=>{(0,n.openModal)((0,e.h)(r,{resolve:t}),false,true)});(0,n.closeModal)();if(t.account==null){let s=t.key_is_locked?"You tried to use an anonymous key that has already been linked to a third-party account. If you wish to use that account, you must login with that service.":"Something went wrong.";(0,n.openPromptEx)("Login Failed",s,n.PromptType.NoClose|n.PromptType.RetryOnly,()=>location.reload(),()=>location.reload());throw new Error("Account prompt failed.")}return t}},function(require,exports) {"use strict";function e(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:true,get:t[l]})}e(exports,{handleInput:()=>r,getAccount:()=>i,setAccount:()=>a,renderAccountInfo:()=>u,renderGameRank:()=>c,getStyleForBackgroundColor:()=>h,ColorPicker:()=>p});const t=require(54);const l=require(61);const n=require(42);const o=require(58);const $=require(6);function r(e,t){return t(e.target.value)}let s;function i(){if(s==null){alert("No account.");throw new Error("No account.")}return s}function a(e){s=e}function u(){function e(e){let t=window.open("/account","_blank","width=800,height=800");if(t!=null){e.preventDefault()}}var l;return(0,t.h)(t.Fragment,null,(0,t.h)("p",null,"You are: ",(0,t.h)("code",{class:"user",style:h((l=s===null||s===void 0?void 0:s.color)!==null&&l!==void 0?l:0)},s===null||s===void 0?void 0:s.name)),c(s===null||s===void 0?void 0:s.game_rank),(0,t.h)("p",null,(0,t.h)("a",{class:"btn btn-small",href:"/account",target:"_blank",rel:"opener",onClick:e},"Manage"),(s===null||s===void 0?void 0:s.is_registered)&&(0,t.h)("form",{method:"POST",action:"/account/logout",style:"display:inline-block"},(0,t.h)("button",{class:"btn-small btn-orange"},"Log Out"))))}function c(e){if(e==null){return null}let l;if(e==$.GameRank.GameMaster){l=(0,t.h)("b",{style:"color:#0F0;"},"DEVELOPER")}else{let r=(0,n.getPledgeTierInfoFromGameRank)(e);if(r==null){return null}l=(0,t.h)("b",{style:"color:"+r.color},(0,t.h)("img",{src:(0,o.getEarlyImageURL)(r.image),height:"16"})," ",r.name_alt)}return(0,t.h)("p",null,"You have ",l," status. Thank you for supporting continued development!")}function h(e){let t={"background":(0,l.numberToHexColor)(e)};if((0,l.calcLumaX)(e)){t.color="#000"}return t}class p extends t.Component{setRGB(e,t,n){let o=(e<<16)+(t<<8)+(n|0);let $=(0,l.numberToHexColor)(o);this.props.onColorUpdate($)}setHSL(e,t,l){t/=100;l/=100;function n(n){let o=(n+e/30)%12;let $=t*Math.min(l,1-l);return l-$*Math.max(-1,Math.min(Math.min(o-3,9-o),1))}let o=n(0)*255;let $=n(8)*255;let r=n(4)*255;this.setRGB(o,$,r)}render(){let e;let n=this.state.picking;if(n!=null){let o=this.props.color;var $;let s=($=(0,l.parseColor)(this.props.color))!==null&&$!==void 0?$:0;let i=s>>16&255;let a=s>>8&255;let u=s&255;let c=i/255;let h=a/255;let p=u/255;let f=0;let m=0;let d=0;{let g=Math.max(Math.max(c,h),p);let y=Math.min(Math.min(c,h),p);let _=g-y;if(_==0){f=0}else if(g==c){f=60*(h-p)/_}else if(g==h){f=60*(2+(p-c)/_)}else if(g==p){f=60*(4+(c-h)/_)}if(f<0){f+=360}d=g-_/2;if(d==0||d==1){m=0}else{m=(g-d)/Math.min(d,1-d)*100}d=d*100}let x=e=>{if((e.buttons&1)==1){let t=e.offsetX/1.5;let l=e.offsetY/1.5;t=Math.max(0,Math.min(100,t));l=Math.max(0,Math.min(100,l));this.setHSL(f,t,100-l)}};let v=m*1.5-3;let F=150-(d*1.5+3);e=(0,t.h)(t.Fragment,null,(0,t.h)("div",{style:"position:fixed;top:0;bottom:0;left:0;right:0;z-index:9999;",onMouseDown:()=>{this.setState({picking:undefined})}}),(0,t.h)("div",{class:"dark window",style:`display:inline-block;position:fixed;z-index:10000;top:${n.y}px;left:${n.x}px;transform:translate(0,-100%);`},(0,t.h)("div",{style:""},(0,t.h)("input",{type:"range",class:"color-slider",min:0,max:360,value:f,onInput:e=>r(e,e=>this.setHSL(+e,m,d)),style:"background:linear-gradient(to right,#F00,#FF0,#0F0,#0FF,#00F,#F0F,#F00);"}),(0,t.h)("div",{style:"width:150px;height:150px;margin-top:5px;background:linear-gradient(to right,hsl("+f+",0%,50%),hsl("+f+",100%,50%));",onMouseMove:x,onMouseDown:x},(0,t.h)("div",{style:"width:100%;height:100%;background:linear-gradient(#FFF,rgba(0,0,0,0),#000);"},(0,t.h)("div",{class:"color-picker-point",style:{top:F+"px",left:v+"px"}}))),"Hex: ",(0,t.h)("input",{style:"font-size:12pt;width:100px;box-sizing:border-box;margin-top:5px;vertical-align:bottom;",maxLength:7,value:o,onInput:e=>r(e,e=>{let t=(0,l.parseColor)(e);if(t!=null)this.props.onColorUpdate(e)})}),(0,t.h)("label",{class:"btn btn-small",style:"vertical-align:bottom;"},"...",(0,t.h)("input",{type:"color",style:"display:none;",value:o,onInput:e=>r(e,e=>{let t=(0,l.parseColor)(e);if(t!=null)this.props.onColorUpdate(e)})})))))}return(0,t.h)("span",null,(0,t.h)("button",{style:"width:100px;height:30px;position:relative",onClick:e=>{let t=e.target.getBoundingClientRect();let l={x:t.left,y:t.top};this.setState({picking:l})}},this.props.color!=""?(0,t.h)("div",{style:{position:"absolute",top:"3px",bottom:"3px",left:"3px",right:"3px",border:"1px solid black","background-color":this.props.color}}):"Select Color"),e)}}},,,function(require,exports) {"use strict";function e(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:true,get:t[i]})}e(exports,{parseTime:()=>i,BetterTickQueue:()=>l,time:()=>h});let t;if(typeof window!="undefined")t=window.performance;else t=require(73).performance;function i(e){let t=e.toLowerCase().match(/^(\d+)([hms])$/);if(t!=null){if(t[2]=="h"){return parseInt(t[1])*60*60}else if(t[2]=="m"){return parseInt(t[1])*60}else if(t[2]=="s"){return parseInt(t[1])}}return null}class n{get tick_now(){return this._tick_now}startGameLoop(e){let i=false;let n=t.now();let s=()=>{if(i)return;let l=t.now();e(n-l);let r=t.now();let u=r-l;this.average_dt_ms=this.average_dt_ms*.99+u*.01;if(this.game_loop_quota!=null){let a=Math.max(h.tick_delta_ms,this.average_dt_ms/this.game_loop_quota);n+=a}else{n+=h.tick_delta_ms}n=Math.max(n,r);setTimeout(s,n-r);this._tick_now+=h.tick_delta};s();return function(){i=true}}get perf_now(){return t.now()}constructor(){this.tick_rate=20;this.tick_delta=1/this.tick_rate;this.tick_delta_ms=1e3/this.tick_rate;this._tick_now=0;this.average_dt_ms=0;this.game_loop_quota=null}}class s{push_event(e,t){let i=h.perf_now;if(e=="empty"){let n=this.events[this.events.length-1];if(n!=null&&n.type=="empty"){return}}this.events.push({type:e,count:t,time:i});while(this.events[0].time<i-this.time_span){this.events.shift()}}constructor(){this.events=new Array;this.time_span=3*1e3}}class l{get length(){return this.internal_queue.length}push(e,t=""){let i=h.perf_now;let n=Math.min(i+this.LAG_TIME_MS,this.next_deadline);this.internal_queue.push(e);this.deadline_queue.push(n);this.next_deadline=n+h.tick_delta_ms;this.debug.push_event("push",this.length)}tryPop(){let e=this.deadline_queue[0];if(e!=null&&h.perf_now>=e){this.deadline_queue.shift();let t=this.internal_queue.shift();this.debug.push_event("pop",this.length);return t}if(h.perf_now>=this.next_deadline){this.debug.push_event("empty",this.length)}return undefined}constructor(){this.LAG_TIME_MS=75;this.internal_queue=new Array;this.deadline_queue=new Array;this.next_deadline=Number.POSITIVE_INFINITY;this.debug=new s}}let h=new n},,function(require,exports) {"use strict";function t(t,e){for(var s in e)Object.defineProperty(t,s,{enumerable:true,get:e[s]})}t(exports,{BASE_SCALE:()=>h,graphics:()=>l});const e=require(1);const s=require(60);const a=require(17);const i=require(0);const h=40;let r={};class c{setHideText(t,e){this.hide_text=t;this.gfx.set_hide_text(e)}get zoomed_in(){return this.cam_scale>10}setup_metal(){if(this.gfx!=null){return}this.gfx=e.cl_module.Gfx.init();this.starField=e.cl_module.GfxStarField.new(this.gfx);this.game_canvas.addEventListener("webglcontextlost",t=>{console.log("webgl context lost");(0,i.reportError)("context lost");t.preventDefault()},false);this.game_canvas.addEventListener("webglcontextrestored",()=>{this.gfx.restore_context()},false)}setCamera(t,e,s){this.cam_scale=s*h;this.cam_x=t-this.game_canvas.width/this.cam_scale/2;this.cam_y=e+this.game_canvas.height/this.cam_scale/2;this.gfx.set_cam(t,e,s*h)}translatePixel(t,e){return{x:t/this.cam_scale+this.cam_x,y:-e/this.cam_scale+this.cam_y}}translatePos(t,e){return{x:(t-this.cam_x)*this.cam_scale,y:(-e+this.cam_y)*this.cam_scale}}clear(t=false){if(t){this.gfx.clear(255);this.starField.draw(this.gfx,this.game_canvas.width,this.game_canvas.height)}else{this.gfx.clear(0)}}drawImage(t,e,s,a=0,i=1,h=1,c=4294967295){if(t==null)return;let l=r[t];if(l==null){l=this.gfx.get_image_id(t);r[t]=l}this.gfx.draw_image(l,c,e,s,a,i,h)}clearImageURL(t){if(this.gfx!=null){this.gfx.clear_image_url(t);delete r[t]}}clearAllImageURLS(){if(this.gfx!=null){this.gfx.clear_all_images();r={}}}translate(t,e,s){this.gfx.matrix_push_translate(t,e);s();this.gfx.matrix_pop()}screen_render(t){let e=this.gfx.matrix_push_screen();t();this.gfx.matrix_pop_screen(e)}fillRect(t,e,s,a,i){this.gfx.matrix_push_translate(e,s);this.gfx.draw_rect(t,a,i);this.gfx.matrix_pop()}strokeLine(t,e,s,a,i,h=.1){this.gfx.draw_line(t,h,e,s,a,i)}drawText(t,e,s,a,i,h){let r=(e-this.cam_x)*this.cam_scale;let c=(this.cam_y-s)*this.cam_scale;this.drawTextSS(t,r,c,a,i,h)}drawTextSS(t,e,s,i=16777215,h=10,r){this.gfx.draw_text_js(t,e,s,i,h,r,a.time.perf_now/1e3)}constructor(){this.waste_vmem=false;this.cam_x=0;this.cam_y=0;this.cam_scale=1;this.BASE_SCALE=h;this.hide_text=false;this.font="";this.game_canvas=document.querySelector("#canvas-game")}}const l=(0,s.RUN_ON_CLIENT)(()=>new c)},,,,,,,,,,,,function(require,exports) {"use strict";function _(_,$){for(var e in $)Object.defineProperty(_,e,{enumerable:true,get:$[e]})}_(exports,{getProfanityMode:()=>d,filterWords:()=>u,checkWords:()=>S});const $=require(7);const e=i([221,199,197,217,214,219,193,218,213,219,194,208,193,200,220,194,203,209,200,193,202,206,203,202,207,203,214,218,220,214,194,205,237,224,239,230,249,254,235,226,227,245,248,225,235,224,235,233,251,254,248,225,251,232,235,241,249,251,241,233,243,224,227,249,143,155,144,137,159,134,138,136,149,148,152,135,139,151,131,137,130,157,157,142,142,154,138,157,138,55498,56673]);const r=i([134,241,208,246,244,202,133,211,231,138,254,248,139,139,193,210,205,195,209,212,212,220,221,197,208,194,223,201,194,218,195,194,242,255,229,254,249,238,236,245,246,238,247,246,235,237,231,253,238,246,239,238,255,233,228,234,243,239,232,241,251,240,251,237,138,134,143,134,153,151,140,128,133,140,129,129,158,128,143,130,149,131,159,146,153,144,139,133,130,158,128,137,134,154,132,130,231,231,243,236,145,170,229,179,135,234,158,152,235]);const t=i([204,192,195,207,214,219,205,199,207,212,216,211,195,196,201,207,223,195,219,216,212,210,204,216,218,203,215,218,220,215,223,220,242,235,229,225,238,228,244,235,231,235,232,246,227,224,235,253,252,254,240,241,186,232,249,250,253,235,231,249,231,231,236,230,134,128,158,136,150,155,154,134,149,147,141,145,151,151,133,157,214,161,128,166,164,154,213,131,183,218,174,168,219,219,130,144,190,170,176,191,171,187,173,186,186,181,165,181,167,167,188,179,191,175,181,179,189,167,170,184,166,190,167,161,251,251,239,240,117,78,1,87,107,6,114,116,15]);const o=i([222,192,222,195,197,215,216,198,212,201,204,208,192,223,209,212,219,218,218,193,215,218,203,205,195,197,214,212,206,222,209,194,250,234,254,239,235,247,231,251,225,230,247,232,254,230,227,226,246,246,224,245,255,245,236,248,255,235,246,241,225,254,236,243,130,128,155,135,133,137,148,129,135,137,128,143,141,129,156,147,151,146,150,146,152,135,145,151,149,146,135,129,142,148,145,159,169,173,173,163,173,183,224,151,186,156,154,164,239,185,129,236,132,130,245,245,170,180,170,183,170,182,186,180,190,250,248,238,15,116,77,0,80,106,5,115,123,14]);const c=i([192,198,203,202,207,217,212,199,207,192,195,196,222,205,201,198,217,195,210,209,221,220,221,203,202,217,216,210,213,210,204,223,226,232,235,241,236,234,239,238,233,243,248,227,227,228,231,232,234,227,250,252,253,252,225,229,240,246,243,242,238,245,241,246,129,155,144,139,139,140,129,157,154,149,129,145,131,145,132,157,21427,131,21420,129,150,148,148,144,149,152,154,137,158,156,156,152,186,174,176,190,162,164,188,168,186,173,165,172,174,161,161,168,170,163,244,131,166,128,134,184,251,173,149,248,136,142,249,249,72,78,75,81,76,74,79,90,90,65,69,66,88,10,8,30,31,100,93,16,64,122,21,99,107,30]);const n=/﷽|𒐫|𒈙|⸻|꧅|ဪ|꧄|௵|௸|ஹ|𒐪|𒐩|𒀰|𒁏|𒅌|𒄡|𒊎|𒍙|𒅃|𒈓|𒌧|𒀱|𒁎|𒍼|𒈟|𒌄|ொ|ோ|ௌ/giu;const a=/https?:\/\/(?!(\w+\.)?(drednot\.io|reddit\.com|discord\.gg|discordapp\.com|fandom\.com|gamepedia\.com|drednews\.com|twitter\.com|patreon\.com))\S+/gi;function i(_){let $="";_.forEach((_,e)=>{$+=String.fromCharCode(_^e^174)});return new RegExp($,"gi")}let p=_=>{return _.replace(/\S/g,"█")};let f;let l={};function d(){return $.USER_SETTINGS.profanity_mode}function u(_,i=false){if(typeof window=="undefined"){{_=_.replace(e,p);_=_.replace(r,p);_=_.replace(a,p)}{_=_.replace(t,p);_=_.replace(o,p);_=_.replace(c,p)}return _}if(f!=$.USER_SETTINGS.profanity_mode){f=$.USER_SETTINGS.profanity_mode;l={}}if(l[_]!=null){return l[_]}let d=_;if($.USER_SETTINGS.profanity_mode==$.ProfanityMode.Strict){_=_.replace(e,p);_=_.replace(r,p);_=_.replace(a,p)}if($.USER_SETTINGS.profanity_mode!=$.ProfanityMode.Off){_=_.replace(t,p);_=_.replace(o,p);_=_.replace(c,p);_=_.replace(n,p)}if(i){l[d]=_}return _}function S(_,$=true){let n=_;if($){_=_.replace(e,p);_=_.replace(r,p);_=_.replace(a,p)}if(true){_=_.replace(t,p);_=_.replace(o,p);_=_.replace(c,p)}return n!=_}},,,,,,function(require,exports) {"use strict";function o(o,e){for(var r in e)Object.defineProperty(o,r,{enumerable:true,get:e[r]})}o(exports,{get_all_styles:()=>c,getLocalOutfit:()=>n,setLocalOutfit:()=>f,getDefaultOutfit:()=>s,migrateOutfit:()=>$,validateOutfit:()=>g});const e=require(61);const r=require(42);let l=[];l[0]={name:"Bald",patron_tier:null,img:null};l[1]={name:"Not Bald",patron_tier:null,img:"player_hair"};l[2]={name:"Clown Hair",patron_tier:"bronze",img:"cosmetic/clown_hair"};let t=[];t[0]={name:"None",patron_tier:null,img:null};t[1]={name:"Lesser Cap",patron_tier:"bronze",img:"cosmetic/cap"};t[2]={name:"Demon Horns",patron_tier:"bronze",img:"cosmetic/horns"};t[3]={name:"Witch Hat",patron_tier:"bronze",img:"cosmetic/witch_hat"};t[4]={name:"Top Hat",patron_tier:"gold",img:"cosmetic/top_hat"};let a=[];a[0]={name:"None",patron_tier:null,img:null};a[1]={name:"Goofy Glasses",patron_tier:"bronze",img:"cosmetic/glasses"};a[2]={name:"Shades",patron_tier:"gold",img:"cosmetic/shades"};a[3]={name:"Clown Nose",patron_tier:"bronze",img:"cosmetic/clown_nose"};a[4]={name:"Alien Mask",patron_tier:"bronze",img:"cosmetic/mask_alien"};a[5]={name:"Goblin Mask",patron_tier:"bronze",img:"cosmetic/mask_goblin",replace_head:true};a[6]={name:"Pumpkin Mask",patron_tier:"bronze",img:"cosmetic/pumpkin"};function c(){return{hats:t,faces:a,hairs:l}}let i=s();function n(){return i}function f(o){i=o}function s(){return{color_body:4695355,color_legs:1393785,color_skin:13212550,color_feet:6242049,color_hair:1118481,style_hair:0,color_hat:16711680,style_hat:0,color_face_1:8421504,style_face_1:0,color_face_2:8421504,style_face_2:0}}function u(o){let r=typeof o=="string"&&(0,e.parseColor)(o);if(typeof r=="number"){return r}return o}function $(o){if(typeof o!="object"||o==null){return}o.color_body=u(o.color_body);o.color_legs=u(o.color_legs);o.color_skin=u(o.color_skin);o.color_hair=u(o.color_hair);let e=s();var r;o.color_feet=(r=o.color_feet)!==null&&r!==void 0?r:e.color_feet;var l;o.color_hat=(l=o.color_hat)!==null&&l!==void 0?l:e.color_hat;var t;o.style_hat=(t=o.style_hat)!==null&&t!==void 0?t:e.style_hat;var a;o.color_face_1=(a=o.color_face_1)!==null&&a!==void 0?a:e.color_face_1;var c;o.style_face_1=(c=o.style_face_1)!==null&&c!==void 0?c:e.style_face_1;var i;o.color_face_2=(i=o.color_face_2)!==null&&i!==void 0?i:e.color_face_2;var n;o.style_face_2=(n=o.style_face_2)!==null&&n!==void 0?n:e.style_face_2}function _(o){return Number.isInteger(o)&&o>=0&&o<=16777215}function y(o,e,l){if(!Number.isInteger(o)){return false}if(e[o]==null){return false}return(0,r.getTierIsGreaterEqual)(l,e[o].patron_tier)}function m(o,e){let r=o&255;let l=o>>8&255;let t=o>>16&255;r=Math.max(r,e);l=Math.max(l,e);t=Math.max(t,e);return r|l<<8|t<<16}function g(o,e,r){let c=s();if(typeof o!="object"||o==null||!e){return c}if(!_(o.color_body)){o.color_body=c.color_body}if(!_(o.color_legs)){o.color_legs=c.color_legs}if(!_(o.color_skin)){o.color_skin=c.color_skin}if(!_(o.color_hair)){o.color_hair=c.color_hair}if(!_(o.color_feet)){o.color_feet=c.color_feet}if(!_(o.color_hat)){o.color_hat=c.color_hat}if(!_(o.color_face_1)){o.color_face_1=c.color_face_1}if(!_(o.color_face_2)){o.color_face_2=c.color_face_2}o.color_body=m(o.color_body,17);o.color_legs=m(o.color_legs,17);o.color_hair=m(o.color_hair,17);o.color_skin=m(o.color_skin,17);o.color_feet=m(o.color_feet,17);o.color_hat=m(o.color_hat,17);o.color_face_1=m(o.color_face_1,17);o.color_face_2=m(o.color_face_2,17);if(!y(o.style_hair,l,r)){o.style_hair=c.style_hair}if(!y(o.style_hat,t,r)){o.style_hat=c.style_hat}if(!y(o.style_face_1,a,r)){o.style_face_1=c.style_face_1}if(!y(o.style_face_2,a,r)){o.style_face_2=c.style_face_2}return o}},,,,,function(require,exports) {"use strict";function e(e,n){for(var r in n)Object.defineProperty(e,r,{enumerable:true,get:n[r]})}e(exports,{getMaxTier:()=>r,getTierIsGreaterEqual:()=>a,getPledgeTierInfoFromGameRank:()=>t,getPledgeTierFromGameRank:()=>o,getPledgeTierInfo:()=>m});const n=require(6);function r(e,n){if(e=="flux"||n=="flux"){return"flux"}if(e=="plat"||n=="plat"){return"plat"}if(e=="gold"||n=="gold"){return"gold"}if(e=="silver"||n=="silver"){return"silver"}if(e=="bronze"||n=="bronze"){return"bronze"}return null}function a(e,n){return r(e,n)==e}function t(e){let n=o(e);return m(n)}function o(e){switch(e){case n.GameRank.PatronBronze:return"bronze";case n.GameRank.PatronSilver:return"silver";case n.GameRank.PatronGold:return"gold";case n.GameRank.PatronPlat:return"plat";case n.GameRank.PatronFlux:return"flux"}return null}function m(e){if(e=="flux"){return{name:"Flux Wrench",name_alt:"Flux Patron",color:"#3A3",image:"item/wrench_flux",game_rank:n.GameRank.PatronFlux}}else if(e=="plat"){return{name:"Platinum Wrench",name_alt:"Platinum Patron",color:"#1AD",image:"item/wrench_platinum",game_rank:n.GameRank.PatronPlat}}else if(e=="gold"){return{name:"Gold Wrench",name_alt:"Gold Patron",color:"#FC0",image:"item/wrench_gold",game_rank:n.GameRank.PatronGold}}else if(e=="silver"){return{name:"Silver Wrench",name_alt:"Silver Patron",color:"#AAA",image:"item/wrench_silver",game_rank:n.GameRank.PatronSilver}}else if(e=="bronze"){return{name:"Bronze Wrench",name_alt:"Bronze Patron",color:"#C71",image:"item/wrench_bronze",game_rank:n.GameRank.PatronBronze}}return null}},,,function(require,exports) {"use strict";function e(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:true,get:t[r]})}e(exports,{loadScript:()=>s,initAds:()=>o});const t=require(6);const r=require(46);function n(e){if(location.search.includes("test_ads=1")){return true}let n=window.navigator.userAgent.toLowerCase();if(n.includes("valve steam")||n.includes("mobile")||(0,r.isHeadless)()||window.location.hostname==t.LOCAL_DOMAIN){return false}return e}let i=new Set;function s(e){if(i.has(e)){return}i.add(e);let t=document.createElement("script");t.src=e;t.async=true;document.head.append(t)}let u=false;let l=false;function o(e){if(l){return u}l=true;console.log("ads requested?",e);if(n(e)){{let t=0;let r=setInterval(()=>{if(window["__cmp"]){document.getElementById("nitro-consent").style.display="";clearInterval(r)}else if(t>10){clearInterval(r)}else{t++}},1e3)}window["nitroAds"]=window["nitroAds"]||{createAd:function(){window.nitroAds.queue.push(["createAd",arguments])},queue:[]};const i=["728","90"];const o=["300","250"];function a(e,t){window["nitroAds"].createAd(e,{"refreshLimit":10,"refreshTime":90,"renderVisibleOnly":true,"refreshVisibleOnly":true,"sizes":t,"report":{"enabled":true,"wording":"Report Ad","position":"top-right"}})}a("new-ad-slot-1",[i]);a("new-ad-slot-2",[i,o]);a("new-ad-slot-3",[i,o]);s("https://s.nitropay.com/ads-436.js");u=true}return u}},function(require,exports) {"use strict";Object.defineProperty(exports,"isHeadless",{enumerable:true,get:()=>e});function e(){return navigator.userAgent.includes("HeadlessChrome")||navigator.webdriver}},function(require,exports) {"use strict";Object.defineProperty(exports,"modFileDB",{enumerable:true,get:()=>a});const e=require(19);const t=require(55);const i=require(11);const l=require(60);function s(){return new Promise((e,t)=>{let i=document.createElement("script");i.onload=function(){e(window.JSZip)};i.src="/jszip.min.js";document.body.appendChild(i)})}class r{async prepareZipLib(){if(this.zipCtor==null){this.zipCtor=await s()}}splitPath(e){let t=e.split("/");let i=t[t.length-1];let l=e.substring(0,e.length-i.length);return{name:i,directory:l}}updateFile(t){let i=t.file;let l=t.path;let s=URL.createObjectURL(i);let{name:r,directory:a}=this.splitPath(l);let h={file:i,path:l,name:r,directory:a,url:s,dl_url:i.type+":"+r+":"+s};let o=this.files[h.path];if(o!=null){URL.revokeObjectURL(o.url)}this.files[h.path]=h;let c=n(h.path);if(c!=null){e.graphics.clearImageURL(c)}}saveFile(e,t,i=true){if(this.database==null||!this.isFileTypeWhitelisted(t)){return}let l={file:e,path:t};let s=this.database.transaction("mod_files","readwrite");let r=s.objectStore("mod_files");r.put(l);this.updateFile(l);if(i){this.syncFilesWithUI()}}moveFile(e,t){if(e==t){return}let i=this.files[e];if(i!=null){this.saveFile(i.file,t,false);this.deleteFile(e);this.syncFilesWithUI()}}deleteFile(t){if(this.database==null){return}let i=this.database.transaction("mod_files","readwrite");let l=i.objectStore("mod_files");l.delete(t);let s=this.files[t];if(s!=null){URL.revokeObjectURL(s.url);delete this.files[t]}let r=n(t);if(r!=null){e.graphics.clearImageURL(r)}this.syncFilesWithUI()}deleteAllFiles(){if(this.database==null){return}let t=this.database.transaction("mod_files","readwrite");let i=t.objectStore("mod_files");i.clear();e.graphics.clearAllImageURLS();this.files={};this.syncFilesWithUI()}reloadFiles(){if(this.database==null){return}let t=this.database.transaction("mod_files","readonly");let i=t.objectStore("mod_files");let l=i.getAll();l.onsuccess=t=>{e.graphics.clearAllImageURLS();let i=l.result;i.forEach(e=>this.updateFile(e));this.syncFilesWithUI()}}syncFilesWithUI(){let e=Object.values(this.files);(0,t.setFilePanelFiles)(e)}getFileURL(e){let t=this.files[e];if(t!=null){return t.url}return null}isDirWhitelisted(e){return e=="/img/"||e=="/img/item/"}isFileTypeWhitelisted(e){return e.endsWith(".png")||e.endsWith(".svg")}importDir(e,t){if(!this.isDirWhitelisted(e)&&e!="/"){return}let i=t.createReader();i.readEntries(t=>{t.forEach(t=>{if(t.isDirectory){this.importDir(e+t.name+"/",t)}else{let i=e+t.name;t.file(e=>{this.saveFile(e,i)})}});this.syncFilesWithUI()})}async importZip(e){try{let t=await this.zipCtor.loadAsync(e);let l=Object.values(t.files);l.forEach(async e=>{if(!e.dir){let t="/"+e.name;let i=await e.async("blob");let{directory:l}=this.splitPath(t);if(this.isDirWhitelisted(l)){this.saveFile(i,t)}}});this.syncFilesWithUI()}catch(s){console.log(s);(0,i.openPrompt)("Error","Failed to read archive.",()=>{})}}tryImport(e){try{let t=e.webkitGetAsEntry();if(t!=null){if(t.isDirectory){(0,i.openPrompt)("Import Pack?",`Do you want to import the directroy '${t.name}' as a mod pack? This may overwrite existing files.`,()=>{this.importDir("/",t)});return true}}}catch(l){}let s=e.getAsFile();if(s!=null&&s.type=="application/x-zip-compressed"){(0,i.openPrompt)("Import Pack?",`Do you want to import the archive '${s.name}' as a mod pack? This may overwrite existing files.`,async()=>{await this.prepareZipLib();this.importZip(s)});return true}return false}async exportZip(){try{let e=new this.zipCtor;let t=Object.values(this.files);t.forEach(t=>{let i=t.path.substr(1);e.file(i,t.file)});let l=await e.generateAsync({type:"blob"});{let s=document.createElement("a");s.setAttribute("href",URL.createObjectURL(l));s.setAttribute("download",`drednot_mod_${Math.random()*1e4|0}.zip`);s.style.display="none";document.body.appendChild(s);s.click();document.body.removeChild(s)}}catch(r){console.log(r);(0,i.openPrompt)("Error","Failed to read archive.",()=>{})}}constructor(){this.files={};let e=indexedDB.open("dredark",1);e.onsuccess=e=>{this.database=e.target.result;this.reloadFiles()};e.onupgradeneeded=e=>{let t=e.target.result;t.createObjectStore("mod_files",{keyPath:"path"})};e.onerror=e=>{(0,t.setModDBBroken)()}}}let a=(0,l.RUN_ON_CLIENT)(()=>new r);function n(e){if(e.startsWith("/img/")){e=e.substring(5);return e.split(".")[0]}return null}},function(require,exports) {exports.default="/x/1640cedc4bb64a2473b58c66d089fb88.png";},function(require,exports) {exports.default="/x/55da1c76ad7946b19b0ab38d305bb76f.png";},function(require,exports) {exports.default="/x/acc1e82b042844c05297a0e6a56c3a49.png";},function(require,exports) {exports.default="/x/c3b4c91f257b99e22f90212b1d108ad7.png";},function(require,exports) {exports.default="/x/05642948682dcd6ae8cb81b03f6e6199.png";},function(require,exports) {exports.default="/x/d6f32b7fa74833f59a57587d706d4274.png";},function(require,exports) {"use strict";var e,n,t,l,o,r,u,i={},s=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,n){for(var t in n)e[t]=n[t];return e}function f(e){var n=e.parentNode;n&&n.removeChild(e)}function a(e,n,t){var l,o,r,u=arguments,i={};for(r in n)"key"==r?l=n[r]:"ref"==r?o=n[r]:i[r]=n[r];if(arguments.length>3)for(t=[t],r=3;r<arguments.length;r++)t.push(u[r]);if(null!=t&&(i.children=t),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return h(e,i,l,o,null)}function h(n,t,l,o,r){var u={type:n,props:t,key:l,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r};return null==r&&(u.__v=u),null!=e.vnode&&e.vnode(u),u}function d(e){return e.children}function v(e,n){this.props=e,this.context=n}function y(e,n){if(null==n)return e.__?y(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?y(e):null}function m(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return m(e)}}function g(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!k.__r++||o!==e.debounceRendering)&&((o=e.debounceRendering)||l)(k)}function k(){for(var e;k.__r=t.length;)e=t.sort(function(e,n){return e.__v.__b-n.__v.__b}),t=[],e.some(function(e){var n,t,l,o,r,u,i;e.__d&&(u=(r=(n=e).__v).__e,(i=n.__P)&&(t=[],(l=c({},r)).__v=l,o=U(i,r,l,n.__n,void 0!==i.ownerSVGElement,null!=r.__h?[u]:null,t,null==u?y(r):u,r.__h),D(t,r),o!=u&&m(r)))})}function $(e,n,t,l,o,r,u,p,c,a){var v,m,g,k,$,C,x,S=l&&l.__k||s,P=S.length;for(c==i&&(c=null!=u?u[0]:P?y(l,0):null),t.__k=[],v=0;v<n.length;v++)if(null!=(k=t.__k[v]=null==(k=n[v])||"boolean"==typeof k?null:"string"==typeof k||"number"==typeof k?h(null,k,null,null,k):Array.isArray(k)?h(d,{children:k},null,null,null):null!=k.__e||null!=k.__c?h(k.type,k.props,k.key,null,k.__v):k)){if(k.__=t,k.__b=t.__b+1,null===(g=S[v])||g&&k.key==g.key&&k.type===g.type)S[v]=void 0;else for(m=0;m<P;m++){if((g=S[m])&&k.key==g.key&&k.type===g.type){S[m]=void 0;break}g=null}$=U(e,k,g=g||i,o,r,u,p,c,a),(m=k.ref)&&g.ref!=m&&(x||(x=[]),g.ref&&x.push(g.ref,null,k),x.push(m,k.__c||$,k)),null!=$?(null==C&&(C=$),c=b(e,k,g,S,u,$,c),a||"option"!=t.type?"function"==typeof t.type&&(t.__d=c):e.value=""):c&&g.__e==c&&c.parentNode!=e&&(c=y(g))}if(t.__e=C,null!=u&&"function"!=typeof t.type)for(v=u.length;v--;)null!=u[v]&&f(u[v]);for(v=P;v--;)null!=S[v]&&T(S[v],S[v]);if(x)for(v=0;v<x.length;v++)w(x[v],x[++v],x[++v])}function b(e,n,t,l,o,r,u){var i,s,p;if(void 0!==n.__d)i=n.__d,n.__d=void 0;else if(o==t||r!=u||null==r.parentNode)n:if(null==u||u.parentNode!==e)e.appendChild(r),i=null;else{for(s=u,p=0;(s=s.nextSibling)&&p<l.length;p+=2)if(s==r)break n;e.insertBefore(r,u),i=u}return void 0!==i?i:r.nextSibling}function C(e,n,t,l,o){var r;for(r in t)"children"===r||"key"===r||r in n||S(e,r,null,t[r],l);for(r in n)o&&"function"!=typeof n[r]||"children"===r||"key"===r||"value"===r||"checked"===r||t[r]===n[r]||S(e,r,n[r],t[r],l)}function x(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||p.test(n)?t:t+"px"}function S(e,n,t,l,o){var r,u,i;if(o&&"className"==n&&(n="class"),"style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof l&&(e.style.cssText=l=""),l)for(n in l)t&&n in t||x(e.style,n,"");if(t)for(n in t)l&&t[n]===l[n]||x(e.style,n,t[n])}else"o"===n[0]&&"n"===n[1]?(r=n!==(n=n.replace(/Capture$/,"")),(u=n.toLowerCase())in e&&(n=u),n=n.slice(2),e.l||(e.l={}),e.l[n+r]=t,i=r?_:P,t?l||e.addEventListener(n,i,r):e.removeEventListener(n,i,r)):"list"!==n&&"tagName"!==n&&"form"!==n&&"type"!==n&&"size"!==n&&"download"!==n&&"href"!==n&&!o&&n in e?e[n]=null==t?"":t:"function"!=typeof t&&"dangerouslySetInnerHTML"!==n&&(n!==(n=n.replace(/xlink:?/,""))?null==t||!1===t?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),t):null==t||!1===t&&!/^ar/.test(n)?e.removeAttribute(n):e.setAttribute(n,t))}function P(n){this.l[n.type+!1](e.event?e.event(n):n)}function _(n){this.l[n.type+!0](e.event?e.event(n):n)}function E(e,n,t){var l,o;for(l=0;l<e.__k.length;l++)(o=e.__k[l])&&(o.__=e,o.__e&&("function"==typeof o.type&&o.__k.length>1&&E(o,n,t),n=b(t,o,o,e.__k,null,o.__e,n),"function"==typeof e.type&&(e.__d=n)))}function U(n,t,l,o,r,u,i,s,p){var f,a,h,y,m,g,k,b,C,x,S,P=t.type;if(void 0!==t.constructor)return null;null!=l.__h&&(p=l.__h,s=t.__e=l.__e,t.__h=null,u=[s]),(f=e.__b)&&f(t);try{n:if("function"==typeof P){if(b=t.props,C=(f=P.contextType)&&o[f.__c],x=f?C?C.props.value:f.__:o,l.__c?k=(a=t.__c=l.__c).__=a.__E:("prototype"in P&&P.prototype.render?t.__c=a=new P(b,x):(t.__c=a=new v(b,x),a.constructor=P,a.render=W),C&&C.sub(a),a.props=b,a.state||(a.state={}),a.context=x,a.__n=o,h=a.__d=!0,a.__h=[]),null==a.__s&&(a.__s=a.state),null!=P.getDerivedStateFromProps&&(a.__s==a.state&&(a.__s=c({},a.__s)),c(a.__s,P.getDerivedStateFromProps(b,a.__s))),y=a.props,m=a.state,h)null==P.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),null!=a.componentDidMount&&a.__h.push(a.componentDidMount);else{if(null==P.getDerivedStateFromProps&&b!==y&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(b,x),!a.__e&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(b,a.__s,x)||t.__v===l.__v){a.props=b,a.state=a.__s,t.__v!==l.__v&&(a.__d=!1),a.__v=t,t.__e=l.__e,t.__k=l.__k,a.__h.length&&i.push(a),E(t,s,n);break n}null!=a.componentWillUpdate&&a.componentWillUpdate(b,a.__s,x),null!=a.componentDidUpdate&&a.__h.push(function(){a.componentDidUpdate(y,m,g)})}a.context=x,a.props=b,a.state=a.__s,(f=e.__r)&&f(t),a.__d=!1,a.__v=t,a.__P=n,f=a.render(a.props,a.state,a.context),a.state=a.__s,null!=a.getChildContext&&(o=c(c({},o),a.getChildContext())),h||null==a.getSnapshotBeforeUpdate||(g=a.getSnapshotBeforeUpdate(y,m)),S=null!=f&&f.type==d&&null==f.key?f.props.children:f,$(n,Array.isArray(S)?S:[S],t,l,o,r,u,i,s,p),a.base=t.__e,t.__h=null,a.__h.length&&i.push(a),k&&(a.__E=a.__=null),a.__e=!1}else null==u&&t.__v===l.__v?(t.__k=l.__k,t.__e=l.__e):t.__e=N(l.__e,t,l,o,r,u,i,p);(f=e.diffed)&&f(t)}catch(_){t.__v=null,(p||null!=u)&&(t.__e=s,t.__h=!!p,u[u.indexOf(s)]=null),e.__e(_,t,l)}return t.__e}function D(n,t){e.__c&&e.__c(t,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(e){e.call(t)})}catch(l){e.__e(l,t.__v)}})}function N(e,n,t,l,o,r,u,p){var c,f,a,h,d,v=t.props,y=n.props;if(o="svg"===n.type||o,null!=r){for(c=0;c<r.length;c++)if(null!=(f=r[c])&&((null===n.type?3===f.nodeType:f.localName===n.type)||e==f)){e=f,r[c]=null;break}}if(null==e){if(null===n.type)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,y.is&&{is:y.is}),r=null,p=!1}if(null===n.type)v===y||p&&e.data===y||(e.data=y);else{if(null!=r&&(r=s.slice.call(e.childNodes)),a=(v=t.props||i).dangerouslySetInnerHTML,h=y.dangerouslySetInnerHTML,!p){if(null!=r)for(v={},d=0;d<e.attributes.length;d++)v[e.attributes[d].name]=e.attributes[d].value;(h||a)&&(h&&(a&&h.__html==a.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}C(e,y,v,o,p),h?n.__k=[]:(c=n.props.children,$(e,Array.isArray(c)?c:[c],n,t,l,"foreignObject"!==n.type&&o,r,u,i,p)),p||("value"in y&&void 0!==(c=y.value)&&(c!==e.value||"progress"===n.type&&!c)&&S(e,"value",c,v.value,!1),"checked"in y&&void 0!==(c=y.checked)&&c!==e.checked&&S(e,"checked",c,v.checked,!1))}return e}function w(n,t,l){try{"function"==typeof n?n(t):n.current=t}catch(o){e.__e(o,l)}}function T(n,t,l){var o,r,u;if(e.unmount&&e.unmount(n),(o=n.ref)&&(o.current&&o.current!==n.__e||w(o,null,t)),l||"function"==typeof n.type||(l=null!=(r=n.__e)),n.__e=n.__d=void 0,null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){e.__e(i,t)}o.base=o.__P=null}if(o=n.__k)for(u=0;u<o.length;u++)o[u]&&T(o[u],t,l);null!=r&&f(r)}function W(e,n,t){return this.constructor(e,t)}function A(n,t,l){var o,u,p;e.__&&e.__(n,t),u=(o=l===r)?null:l&&l.__k||t.__k,n=a(d,null,[n]),p=[],U(t,(o?t:l||t).__k=n,u||i,i,void 0!==t.ownerSVGElement,l&&!o?[l]:u?null:t.childNodes.length?s.slice.call(t.childNodes):null,p,l||i,o),D(p,n)}e={__e:function(e,n){for(var t,l,o,r=n.__h;n=n.__;)if((t=n.__c)&&!t.__)try{if((l=t.constructor)&&null!=l.getDerivedStateFromError&&(t.setState(l.getDerivedStateFromError(e)),o=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),o=t.__d),o)return n.__h=r,t.__E=t}catch(u){e=u}throw e}},n=function(e){return null!=e&&void 0===e.constructor},v.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},t),this.props)),e&&c(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),g(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},v.prototype.render=d,t=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,k.__r=0,r=i,u=0,exports.render=A,exports.hydrate=function(e,n){A(e,n,r)},exports.createElement=a,exports.h=a,exports.Fragment=d,exports.createRef=function(){return{current:null}},exports.isValidElement=n,exports.Component=v,exports.cloneElement=function(e,n,t){var l,o,r,u=arguments,i=c({},e.props);for(r in n)"key"==r?l=n[r]:"ref"==r?o=n[r]:i[r]=n[r];if(arguments.length>3)for(t=[t],r=3;r<arguments.length;r++)t.push(u[r]);return null!=t&&(i.children=t),h(e.type,i,l||e.key,o||e.ref,null)},exports.createContext=function(e,n){var t={__c:n="__cC"+u++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e,t,l){return this.getChildContext||(t=[],(l={})[n]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(g)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}};return t.Provider.__=t.Consumer.contextType=t},exports.toChildArray=function e(n,t){return t=t||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(n){e(n,t)}):t.push(n)),t},exports.__u=T,exports.options=e},function(require,exports) {"use strict";function e(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:true,get:t[l]})}e(exports,{setFilePanelFiles:()=>m,setModDBBroken:()=>g,toggleUI:()=>k,openBlankPanel:()=>F});const t=require(54);const l=require(7);const s=require(11);const n=require(14);const a=require(60);const r=require(47);let i=(0,a.RUN_ON_CLIENT)(()=>document.getElementById("new-ui-left"));let o=null;class h extends t.Component{render(){let e=undefined;if(this.props.is_blank){e=e=>{o=e}}return(0,t.h)("div",{class:"window",style:{display:this.props.active?"":"none"}},(0,t.h)("iframe",{src:this.props.page,ref:e}),(0,t.h)("div",{class:"close"},(0,t.h)("button",{class:"btn-grey",onClick:()=>{let e=window.open(this.props.page,"_blank","height=600,width=400");if(this.props.is_blank&&e!=null&&(o===null||o===void 0?void 0:o.contentDocument)!=null){e.document.documentElement.innerHTML=o.contentDocument.documentElement.innerHTML}k()}},"Pop Out"),(0,t.h)("button",{class:"btn-red",onClick:()=>k()},"Close")))}}class u extends t.Component{render(){let e=this.props.log?(Math.log10(this.props.value)+1)/2:this.props.value;let l=this.props.log?e=>{this.props.onUpdate(10**(e*2-1))}:this.props.onUpdate;return(0,t.h)("p",null,(0,t.h)("b",null,this.props.label,":")," ",(0,t.h)("input",{type:"range",step:"0.01",min:"0",max:"1",style:"vertical-align:middle;",value:e,onInput:e=>(0,n.handleInput)(e,e=>l(+e))})," ",Math.round(this.props.value*100),"%")}}class c extends t.Component{render(){let e=this.props.options.map(([e,l])=>{return(0,t.h)("option",{value:l},e)});return(0,t.h)("p",null,(0,t.h)("b",null,this.props.label,":")," ",(0,t.h)("select",{value:this.props.value,onInput:e=>(0,n.handleInput)(e,e=>this.props.onUpdate(+e))},e))}}class p extends t.Component{render(){return(0,t.h)("div",{class:"window darker"},(0,t.h)("div",{class:"close"},(0,t.h)("button",{class:"btn-red",onClick:()=>k()},"Close")),(0,t.h)("h2",null,"Settings"),(0,t.h)("section",null,(0,t.h)("h3",null,"Account"),(0,n.renderAccountInfo)(),(0,t.h)("p",null,(0,t.h)("label",null,(0,t.h)("b",null,"Hide My Special Tags:"),(0,t.h)("input",{type:"checkbox",checked:this.state.hide_game_rank,onInput:e=>{if(e!=null&&e.target instanceof HTMLInputElement){let t=e.target.checked;this.setState({hide_game_rank:t});l.USER_SETTINGS.hide_game_rank=t}}})))),(0,t.h)("section",null,(0,t.h)("h3",null,"Audio"),(0,t.h)(u,{label:"Volume",value:this.state.volume,onUpdate:e=>{this.setState({volume:e});l.USER_SETTINGS.volume=e}})),(0,t.h)("section",null,(0,t.h)("h3",null,"Display / Interface"),(0,t.h)(c,{label:"Profanity Filter",options:[["Strict",l.ProfanityMode.Strict],["Moderate",l.ProfanityMode.Moderate]],value:this.state.profanity_mode,onUpdate:e=>{this.setState({profanity_mode:e});l.USER_SETTINGS.profanity_mode=e}}),(0,t.h)("p",null,"Strict mode attempts to block all profanity, while moderate mode only attempts to block extremely offensive and obscene language. If you don't want to deal with the filter, use external communications."),(0,t.h)("p",null,(0,t.h)("label",null,(0,t.h)("b",null,"Always show turret ammo count:"),(0,t.h)("input",{type:"checkbox",checked:this.state.always_show_ammo,onInput:e=>{if(e!=null&&e.target instanceof HTMLInputElement){let t=e.target.checked;this.setState({always_show_ammo:t});l.USER_SETTINGS.always_show_ammo=t}}}))),(0,t.h)("button",{onClick:()=>k("mod_assets")},"Modify Assets")),(0,t.h)("section",null,(0,t.h)("h3",null,"Input"),(0,t.h)(u,{label:"Zoom Scroll Speed",value:this.state.zoom_speed,log:true,onUpdate:e=>{this.setState({zoom_speed:e});l.USER_SETTINGS.zoom_speed=e}})))}constructor(e){super(e);this.state=(0,l.cloneUserSettings)()}}let d=[];let $=[];function m(e){d=e;$.forEach(e=>{e.refreshFiles()})}let f=false;function g(){f=true}class v extends t.Component{componentDidMount(){$.push(this)}getDirPath(){let e=this.props.desc;var t;let l=((t=this.props.base)!==null&&t!==void 0?t:"/")+e.name+"/";return l}filterFiles(e){let t=this.getDirPath();let l=e.filter(e=>e.directory==t);l.sort((e,t)=>e.name.localeCompare(t.name));return l}refreshFiles(){this.setState({files:this.filterFiles(d)})}render(){var e;let l=this.getDirPath();let s=e=>{this.setState({hilight:false});if(e.dataTransfer!=null){let t=e.dataTransfer.getData("mod_file");if(t!=""){let s=t.split("/").pop();let n=l+s;r.modFileDB.moveFile(t,n)}else{for(let a=0;a<e.dataTransfer.items.length;a++){let i=e.dataTransfer.items[a];if(i.kind=="file"){let o=i.getAsFile();if(o!=null){let h=l+o.name;r.modFileDB.saveFile(o,h)}}if(r.modFileDB.tryImport(i)){break}}}}e.preventDefault();e.stopPropagation()};let n=this.state.files.map(e=>{let s=()=>{let t=l+e.name;r.modFileDB.deleteFile(t)};let n=t=>{if(t.dataTransfer!=null){t.dataTransfer.setData("DownloadURL",e.dl_url);t.dataTransfer.setData("mod_file",e.path)}};return(0,t.h)("tr",{class:"file-pane-file",draggable:true,onDragStart:n},(0,t.h)("td",{class:"file-pane-img",style:`background-image:url('${e.url}')`}),(0,t.h)("td",{class:"file-pane-name"},e.name),(0,t.h)("td",null,(0,t.h)("button",{class:"btn-red btn-small",onClick:s},"X")))});let a=(e=this.props.desc.subdirs)===null||e===void 0?void 0:e.map(e=>{return(0,t.h)(v,{desc:e,base:l})});let i=e=>{this.setState({hilight:true});e.preventDefault();e.stopPropagation()};let o=()=>{this.setState({hilight:false})};return(0,t.h)("div",{class:"file-pane",style:this.state.hilight?"background:#116":"background:#111",onDragOver:i,onDrop:s,onDragLeave:o},(0,t.h)("h3",null,l),n.length==0&&(0,t.h)("p",null,"Drag Files Here"),(0,t.h)("table",{style:"border-collapse: collapse;"},n),a)}constructor(e){super(e);this.state={files:this.filterFiles(d),hilight:false}}}class S extends t.Component{async prepareZipLib(){await r.modFileDB.prepareZipLib();this.setState({can_export:true})}render(){let e=()=>{r.modFileDB.reloadFiles()};let l=()=>{(0,s.openPrompt)("Clear Mod Assets?","Are you sure you want to clear all your saved mod assets?",()=>{r.modFileDB.deleteAllFiles()})};let n=()=>{r.modFileDB.exportZip()};if(f){return(0,t.h)("div",{class:"window darker"},(0,t.h)("div",{class:"close"},(0,t.h)("button",{class:"btn-red",onClick:()=>k()},"Close")),(0,t.h)("h2",null,"Asset Modification"),(0,t.h)("p",{class:"warning-text"},"Failed to load mod file DB. Running the game in private mode can cause this in Firefox."))}return(0,t.h)("div",{class:"window darker"},(0,t.h)("div",{class:"close"},(0,t.h)("button",{class:"btn-red",onClick:()=>k()},"Close")),(0,t.h)("h2",null,"Asset Modification"),(0,t.h)("p",null,"Original files and names can be found ",(0,t.h)("a",{href:"/img/"},"here"),". Only images can currently be modified. Most sprites are scaled to 40 pixels/tile - changing the scale may be supported in the future. Drag files into the panes below. File names must match base asset names. Extensions do not need to match, but are limited to PNG and SVG. The game graphics should update in real-time to reflect changes."),(0,t.h)("p",null,"Mods are stored locally on your machine, but can be exported as zip archives. Drag an exported zip or folder anywhere in the game window to import an entire mod. Mods might be broken by updates."),(0,t.h)("button",{onClick:e},"Refresh ↻"),(0,t.h)("button",{onClick:n,disabled:!this.state.can_export},"Export Mod ↗"),(0,t.h)("button",{onClick:l,class:"btn-red"},"Clear X"),(0,t.h)(v,{desc:{name:"img",subdirs:[{name:"item"}]}}))}constructor(e){super(e);this.state={can_export:false};this.prepareZipLib()}}class D extends t.Component{render(){let e=this.props.ui;if(e!=null&&!this.cached_uis.includes(e)){this.cached_uis.push(e)}let l=this.cached_uis.map(l=>{switch(l){case"blank":return(0,t.h)(h,{page:"",is_blank:true,active:l==e});case"help":return(0,t.h)(h,{page:"help.html",active:l==e});case"quickstart":return(0,t.h)(h,{page:"quickstart.html",active:l==e});case"changelog":return(0,t.h)(h,{page:"changelog.html",active:l==e});case"map":return(0,t.h)(h,{page:"map.svg",active:l==e});case"settings":return l==e?(0,t.h)(p,null):null;case"mod_assets":return l==e?(0,t.h)(S,null):null;default:return null}});return(0,t.h)(t.Fragment,null,l)}constructor(...e){super(...e);this.cached_uis=[]}}let y=undefined;function k(e){if(y==e){y=undefined}else{y=e}(0,t.render)((0,t.h)(D,{ui:y}),i)}function b(e){return new Promise((t,l)=>{var s;if(((s=e.contentDocument)===null||s===void 0?void 0:s.readyState)=="complete"){t(e.contentDocument)}else{e.onload=l=>{if(e.contentDocument!=null){t(e.contentDocument)}}}})}async function F(){if(y!="blank"){k("blank")}if(o!=null){let e=await b(o);e.documentElement.innerHTML=`<head>
            <base href="${window.location.toString()}">
            <link rel="stylesheet" href="/standalone_ui.css">
            </head><body class="narrow"></body>`;return e}else{console.log("NO FRAME!")}return null}(0,a.RUN_ON_CLIENT)(()=>{window.toggleUI=k})},function(require,exports) {"use strict";Object.defineProperty(exports,"getHostName",{enumerable:true,get:()=>t});const e=require(6);function t(){if(typeof window=="undefined"){return""}if(location.hostname==e.LOCAL_DOMAIN){}return location.hostname}},function(require,exports) {"use strict";function e(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:true,get:t[n]})}e(exports,{timeout:()=>r,settle:()=>u,censorKey:()=>i,validateUsername:()=>o,formatTime:()=>c,getWorldText:()=>l,getAngle:()=>a,checkKey:()=>f,wait:()=>s,shuffle:()=>$,array_pick:()=>h,Searcher:()=>g});const t=require(31);const n=require(6);function r(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e);t.then(n,r)})}function u(e){return new Promise(function(t,n){e.then(t,t)})}function i(e){return e.substr(0,4)+"*".repeat(Math.max(0,e.length-4))}function o(e){if(e.length>20){return"Name too long."}if(e.length<3){return"Name too short."}if(e.startsWith(" ")){return"Name can not start with a space."}if(e.endsWith(" ")){return"Name can not end with a space."}if(e.includes("  ")){return"Name can not contain consecutive spaces."}let n=e.match(/[^a-z0-9 ]/gi);if(n!=null){return`Name contains a disallowed character: '${n[0]}'`}if((0,t.checkWords)(e)){return"Name contains a bad word."}return null}function c(e){let t=e%60;let n=Math.floor(e/60)%60;let r=Math.floor(e/3600);let u=""+t;if(n>0||r>0){u="0"+u;u=u.substring(u.length-2);u=n+":"+u;if(r>0){u="0"+u;u=u.substring(u.length-5);u=r+":"+u}}return u}function l(e){if(e=="The Pits"){return["[Mission] Buried treasure. (No Limits)",11541580]}if(e.startsWith("Test Battle Zone")){return["No Cheating. Ships revert upon leaving.",11541580]}let t=e.split(" ")[0];switch(t){case"Freeport":return["Safe Zone. Weapons Disabled.",4521796];case"Hummingbird":return["Starter/Solo Zone. (Combat Rating ≤ "+n.MAX_COMBAT_RATING_1.toLocaleString()+")",16772664];case"Finch":return["Intermediate Zone. (Combat Rating ≤ "+n.MAX_COMBAT_RATING_2.toLocaleString()+")",16772664];case"Sparrow":return["WARNING: High Risk Zone. (No Limits)",16729156];case"Raven":return["WARNING: High Risk PvP Arena. (No Limits)",16729156];case"Canary":return["[Mission] High-Value Mining. (No Limits)",13197862];case"Vulture":return["[Mission] Bot Hordes (No Limits)",0]}return["???",16777215]}function a(e,t,n,r){return Math.atan2(r-t,n-e)}function f(e){return/^[0-9a-zA-Z\-_]{24}$/.test(e)}async function s(e){return new Promise((t,n)=>{setTimeout(()=>{t(null)},e)})}function $(e){let t,n,r;for(r=e.length-1;r>0;r--){t=Math.floor(Math.random()*(r+1));n=e[r];e[r]=e[t];e[t]=n}return e}function h(e){return e[Math.floor(Math.random()*e.length)]}class g{find_in(e){if(e==null){return false}let t=e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return t.includes(this.norm_word)}constructor(e){this.norm_word=e.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}}},function(require,exports) {"use strict";Object.defineProperty(exports,"getEarlyImageURL",{enumerable:true,get:()=>t});const e=require(47);function t(t){let r="/img/"+(t.includes(".")?t:t+".png");if(e.modFileDB==null){return r}let u=e.modFileDB.getFileURL(r);if(u!=null){return u}switch(t){case"no_ship_icon":return require(48).default;case"item/wrench_bronze":return require(49).default;case"item/wrench_silver":return require(50).default;case"item/wrench_gold":return require(51).default;case"item/wrench_platinum":return require(52).default;case"item/wrench_flux":return require(53).default}}},function(require,exports) {"use strict";Object.defineProperty(exports,"ServerOption",{enumerable:true,get:()=>t});const e=require(54);const r=require(8);require(55);class t extends e.Component{getServerText(e){if(r.SERVERS[e].ping!=null){return`${e+1} - ${r.SERVERS[e].description} - ${r.SERVERS[e].player_count} / ${r.SERVERS[e].max_player_count} - ${Math.round(r.SERVERS[e].ping)}ms`}return`${e+1} - ${r.SERVERS[e].description} - No Response`}componentDidMount(){r.SERVERS[this.props.server_id].update_callback=()=>{this.forceUpdate()}}render(){return(0,e.h)("option",{selected:this.props.selected,value:this.props.server_id},this.getServerText(this.props.server_id))}}},function(require,exports) {"use strict";Object.defineProperty(exports,"RUN_ON_CLIENT",{enumerable:true,get:()=>e});function e(e,r){if(typeof window!="undefined"){return e()}else if(r!=null){return r()}return null}},function(require,exports) {"use strict";function e(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:true,get:t[r]})}e(exports,{numberToHexColor:()=>t,parseColor:()=>r,colorNumToCSS:()=>n,randomColor:()=>l,calcLumaX:()=>u,calcLuma:()=>o});function t(e){let t=e.toString(16);while(t.length<6){t="0"+t}t="#"+t;return t}function r(e){if(e.length!=7||e[0]!="#"){return null}let t=parseInt(e.substr(1),16);if(t!=t){return null}return t}function n(e){let t=e>>16&255;let r=e>>8&255;let n=e&255;return`rgb(${t},${r},${n})`}function l(){let e=Math.floor(Math.random()*16777216).toString(16);while(e.length<6){e="0"+e}e="#"+e;return e}function u(e){let t=e>>16;let r=e>>8&255;let n=e&255;return o(t,r,n)}function o(e,t,r){let n=2.4;let l=e=>{let t=e/255;if(t<=.03928){return t/12.92}else{return((t+.055)/1.055)**n}};let u=.2126*l(e)+.7152*l(t)+.0722*l(r);return u>.2140411404}},function(require,exports) {"use strict";function e(e,o){for(var t in o)Object.defineProperty(e,t,{enumerable:true,get:o[t]})}e(exports,{getCookiePrefix:()=>i,getCookie:()=>n,setCookie:()=>r,deleteCookie:()=>c});const o=require(6);const t=require(56);function i(){if((0,t.getHostName)()==o.TEST_DOMAIN){return"test_"}if((0,t.getHostName)()==o.LOCAL_DOMAIN){return"local_"}return""}function n(e){e=i()+e;let o="; "+document.cookie;let t=o.split("; "+e+"=");if(t.length>=2)return decodeURIComponent(t.pop().split(";").shift()||"");return""}function r(e,t){e=i()+e;let n=e+"="+encodeURIComponent(""+t)+";max-age=9999999999;path=/;domain=."+o.BASE_DOMAIN;n+=";Secure;SameSite=None";document.cookie=n}function c(e){e=i()+e;document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=."+o.BASE_DOMAIN;document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=."+o.TEST_DOMAIN;document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"}},function(require,exports) {"use strict";Object.defineProperty(exports,"renderLoginButtons",{enumerable:true,get:()=>n});const e=require(54);function t(t,n){let o=t==n;const r={"discord":(0,e.h)("button",{class:"btn-discord"},"Sign in with Discord"),"google":(0,e.h)("button",{class:"btn-google"})};return(0,e.h)("div",{style:o?"border:1px solid #0F0;color:#0F0;border-radius:4px;":undefined},(0,e.h)("form",{action:"/account/login/start?service="+t,method:"POST"},r[t],o&&"← Last Used"))}function n(n){return(0,e.h)("div",null,t("google",n),t("discord",n))}},,,,,,,,,,function(require,exports) {"use strict"},,,,,,,,function(require,exports) {"use strict";const e=require(0);const t=require(1);require(2);const n=require(3);const o=require(4);const r=require(5);const a=require(6);const i=require(7);const c=require(8);const s=require(9);const l=require(10);const p=require(11);const d=require(12);const u=require(13);const f=require(14);while(window!=window);(0,e.setupErrorLogging)();(0,o.miscWebSetup)();let g=false;window.addEventListener("message",e=>{if(e.origin==location.origin){if(e.data.join_ship!=null){if(e.data.never_load){g=true}$(0,{type:"join_or_load",id:e.data.join_ship})}}});let S;let E=new l.StartUIShipyard;let h=y(m);async function w(){(0,d.analyticsInit)();let e=await (0,u.checkAccountOrPromptLogin)();let t=(0,o.parseInviteAndClearURL)();if(i.USER_SETTINGS.preferred_server<0){i.USER_SETTINGS.preferred_server=e.geo_server}if(e.ban!=null){let n=e.ban.expire_time?new Date(e.ban.expire_time).toLocaleString():"NOPE!";(0,p.openPrompt)("HARD BANNED","This account or address is banned from the game.\n\nReason/Note: "+e.ban.ban_info+"\n\nExpires: "+n,undefined,true,true);return}(0,f.setAccount)(e.account);E.show_ads=e.show_ads;if(t!=null){$(0,{type:"invite",code:t})}else{E.render($)}}function m(){E.setOpen(true);E.render($)}(0,s.checkNotice)(w);async function y(e){try{let n=await (0,t.setup_cl)();let o=n.GameClient;return new o(e)}catch(r){let a="This is probably caused by an outdated or incompatible browser.\n\n"+r+"\n\n";if(r instanceof Error){a+="-------------------------------\n\n";a+=r.stack}(0,p.closeModal)();(0,p.openPromptEx)("Loading Failed",a,p.PromptType.Danger|p.PromptType.NoClose|p.PromptType.Formatted);throw r}}async function $(e,t){E.setOpen(false);if(S!=null){await S()}let o=await h;try{let s={game_version:r.GAME_VERSION,hide_game_rank:i.USER_SETTINGS.hide_game_rank,never_load:g,server_id:e,ship:t};let l={join_info:s};let p=await fetch("//"+c.QUERY_DOMAIN_SIMPLE+"/join",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});if(!p.ok){throw new Error("Join request failed: "+await p.text())}let d=await p.json();if(d.reject!=null){console.log("connect rejected!",a.DropReason[d.reject]);console.log("[[drednot dead]]");(0,n.openDisconnectDialog)(d.reject,()=>{m()});return}if(d.okay!==true){throw"bad join result"}e=d.server_id;let u=c.SERVERS[e].domain;let f=d.net_port;console.log("using port",f);o.start(c.CONNECT_PROTO+"//"+u+":"+f,c.SERVERS[e].description)}catch(w){console.log("CONNECT ERROR",w.toString());console.log("[[drednot dead]]");(0,n.openDisconnectDialog)(-1,()=>{m()});return}}},function(require,exports) {"use strict";exports.setup=async function(e){let t=fetch(require(83).default);let a=require.async(require(84));let l=await a;await l.default(t);e(l);window.GCNIBDQUJH=require.c;l.launch_background_workers();delete window.GCNIBDQUJH;let n=require;return n(require(85).id)}},function(require,exports) {exports.default="/x/cce2f90f1cb73b03091712907c84d337.wasm";},function(require,exports) {exports.url="/x/wasm.6645f27a14b39f28b0dc22365e88298f.js";exports.id=86;},function(require,exports) {exports.url="/x/game.6645f27a14b39f28b0dc22365e88298f.js";exports.id=92;},,,,,,,,,,,,,,,,,,,,,,];r(81)})();</script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vaafb692b2aea4879b33c060e79fe94621666317369993" integrity="sha512-0ahDYl866UMhKuYcW078ScMalXqtFJggm7TmlUtp0UlD4eQk0Ixfnm5ykXKvGJNFjLMoortdseTfsRT8oCfgGA==" data-cf-beacon='{"rayId":"7901dfa89f772b14","token":"bd7f410135a94e1a81ab224b8c95a441","version":"2022.11.3","si":100}' crossorigin="anonymous"></script>
</body>
